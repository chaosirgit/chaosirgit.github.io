<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Ethan Kuo"><meta name=description content="Preface    Recently a project needs to use multi-user table system authentication, using Passport to achieve for Token issuance and authentication, but for multi-user table login Passport is still difficult to achieve, see some multi-user table login is also used GuzzleHttp carry additional parameters to achieve, does not meet my needs. After a period of exploration, I finally implemented Passport through the personal token multi-user table login.
Step    Laravel Version 6."><meta name=keywords content="Passport,Laravel,Oauth"><meta name=twitter:card content="summary"><meta name=twitter:title content="Laravel Passport Personal Token Multi-User Login"><meta name=twitter:description content="Preface    Recently a project needs to use multi-user table system authentication, using Passport to achieve for Token issuance and authentication, but for multi-user table login Passport is still difficult to achieve, see some multi-user table login is also used GuzzleHttp carry additional parameters to achieve, does not meet my needs. After a period of exploration, I finally implemented Passport through the personal token multi-user table login.
Step    Laravel Version 6."><meta property="og:title" content="Laravel Passport Personal Token Multi-User Login"><meta property="og:description" content="Preface    Recently a project needs to use multi-user table system authentication, using Passport to achieve for Token issuance and authentication, but for multi-user table login Passport is still difficult to achieve, see some multi-user table login is also used GuzzleHttp carry additional parameters to achieve, does not meet my needs. After a period of exploration, I finally implemented Passport through the personal token multi-user table login.
Step    Laravel Version 6."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.adminchao.com/posts/laravel-passport-personal-token-multi-user-login/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-03-27T21:08:27+00:00"><meta property="article:modified_time" content="2020-03-27T21:08:27+00:00"><title>Laravel Passport Personal Token Multi-User Login Â· Ethan Kuo Blog</title><link rel=canonical href=https://blog.adminchao.com/posts/laravel-passport-personal-token-multi-user-login/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.d9fddbffe6f27e69985dc5fe0471cdb0e57fbf4775714bc3d847accb08f4a1f6.css integrity="sha256-2f3b/+byfmmYXcX+BHHNsOV/v0d1cUvD2Eesywj0ofY=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.002ee2378e14c7a68f1f0a53d9694ed252090987c4e768023fac694a4fc5f793.css integrity="sha256-AC7iN44Ux6aPHwpT2WlO0lIJCYfE52gCP6xpSk/F95M=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><meta name=generator content="Hugo 0.97.3"></head><body class="preload-transitions colorscheme-dark"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Ethan Kuo Blog</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/contact/>Contact me</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class=navigation-item><a href=https://blog.adminchao.com/zh-cn/>ðŸ‡¨ðŸ‡³</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://blog.adminchao.com/posts/laravel-passport-personal-token-multi-user-login/>Laravel Passport Personal Token Multi-User Login</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2020-03-27T21:08:27Z>2020-03-27 21:08:27</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
8-minute read</span></div><div class=categories><i class="fa fa-folder" aria-hidden=true></i>
<a href=/categories/laravel/>Laravel</a></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/laravel/>Laravel</a></span>
<span class=separator>â€¢</span>
<span class=tag><a href=/tags/passport/>Passport</a></span>
<span class=separator>â€¢</span>
<span class=tag><a href=/tags/oauth/>Oauth</a></span>
<span class=separator>â€¢</span>
<span class=tag><a href=/tags/php/>php</a></span></div></div></header><div><h2 id=preface>Preface
<a class=heading-link href=#preface><i class="fa fa-link" aria-hidden=true></i></a></h2><p>Recently a project needs to use multi-user table system authentication, using Passport to achieve for Token issuance and authentication, but for multi-user table login Passport is still difficult to achieve, see some multi-user table login is also used GuzzleHttp carry additional parameters to achieve, does not meet my needs. After a period of exploration, I finally implemented Passport through the personal token multi-user table login.</p><h2 id=step>Step
<a class=heading-link href=#step><i class="fa fa-link" aria-hidden=true></i></a></h2><p>Laravel Version 6.0</p><h3 id=install>Install
<a class=heading-link href=#install><i class="fa fa-link" aria-hidden=true></i></a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>composer <span style=color:#ff79c6>require</span> laravel<span style=color:#ff79c6>/</span>passport
</span></span></code></pre></td></tr></table></div></div><h3 id=exporting-default-migration-files>Exporting default migration files
<a class=heading-link href=#exporting-default-migration-files><i class="fa fa-link" aria-hidden=true></i></a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>php artisan vendor<span style=color:#ff79c6>:</span>publish <span style=color:#ff79c6>--</span>tag<span style=color:#ff79c6>=</span>passport<span style=color:#ff79c6>-</span>migrations
</span></span></code></pre></td></tr></table></div></div><p>Run the command will generate in <code>\app\database\migrations\</code></p><ul><li>Date_create_oauth_auth_codes_table.php</li><li>Date_create_oauth_access_tokens_table.php</li><li>Date_create_oauth_refresh_tokens_table.php</li><li>Date_create_oauth_clients_table.php</li><li>Date_create_oauth_personal_access_clients_table.php</li></ul><p>Five database migration files, of which <code>Date_create_oauth_access_tokens_table</code> is used to record the successful Token issuance. We need to make a copy of this table to create a Token record for another user table.</p><h3 id=create-custom-access_token-table>Create custom access_token table
<a class=heading-link href=#create-custom-access_token-table><i class="fa fa-link" aria-hidden=true></i></a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>php artisan make:migration create_oauth_other_tokens --create=oauth_other_tokens
</span></span></code></pre></td></tr></table></div></div><p>Generate the <code>Date_create_oauth_other_tokens</code> migration file.</p><p>Copy the contents of the <code>Date_create_oauth_access_tokens_table</code> file to <code>Date_create_oauth_other_tokens</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#ff79c6>&lt;?</span>php
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Illuminate\Database\Migrations\Migration;
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Illuminate\Database\Schema\Blueprint;
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Illuminate\Support\Facades\Schema;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>CreateOauthOtherTokens</span> <span style=color:#ff79c6>extends</span> Migration
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>/**
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     * Run the migrations.
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     *
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     * @return void
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>public</span> <span style=color:#ff79c6>function</span> <span style=color:#50fa7b>up</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        Schema<span style=color:#ff79c6>::</span><span style=color:#50fa7b>create</span>(<span style=color:#f1fa8c>&#39;oauth_other_tokens&#39;</span>, <span style=color:#ff79c6>function</span> (Blueprint <span style=color:#8be9fd;font-style:italic>$table</span>) {
</span></span><span style=display:flex><span>            <span style=color:#8be9fd;font-style:italic>$table</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>string</span>(<span style=color:#f1fa8c>&#39;id&#39;</span>, <span style=color:#bd93f9>100</span>)<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>primary</span>();
</span></span><span style=display:flex><span>            <span style=color:#8be9fd;font-style:italic>$table</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>unsignedBigInteger</span>(<span style=color:#f1fa8c>&#39;user_id&#39;</span>)<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>nullable</span>()<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>index</span>();
</span></span><span style=display:flex><span>            <span style=color:#8be9fd;font-style:italic>$table</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>unsignedBigInteger</span>(<span style=color:#f1fa8c>&#39;client_id&#39;</span>);
</span></span><span style=display:flex><span>            <span style=color:#8be9fd;font-style:italic>$table</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>string</span>(<span style=color:#f1fa8c>&#39;name&#39;</span>)<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>nullable</span>();
</span></span><span style=display:flex><span>            <span style=color:#8be9fd;font-style:italic>$table</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>text</span>(<span style=color:#f1fa8c>&#39;scopes&#39;</span>)<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>nullable</span>();
</span></span><span style=display:flex><span>            <span style=color:#8be9fd;font-style:italic>$table</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>boolean</span>(<span style=color:#f1fa8c>&#39;revoked&#39;</span>);
</span></span><span style=display:flex><span>            <span style=color:#8be9fd;font-style:italic>$table</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>timestamps</span>();
</span></span><span style=display:flex><span>            <span style=color:#8be9fd;font-style:italic>$table</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>dateTime</span>(<span style=color:#f1fa8c>&#39;expires_at&#39;</span>)<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>nullable</span>();
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>/**
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     * Reverse the migrations.
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     *
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     * @return void
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>public</span> <span style=color:#ff79c6>function</span> <span style=color:#50fa7b>down</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        Schema<span style=color:#ff79c6>::</span><span style=color:#50fa7b>dropIfExists</span>(<span style=color:#f1fa8c>&#39;oauth_other_tokens&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=run-database-migration>Run database migration
<a class=heading-link href=#run-database-migration><i class="fa fa-link" aria-hidden=true></i></a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>php artisan migrate
</span></span></code></pre></td></tr></table></div></div><h3 id=generate-client>Generate client
<a class=heading-link href=#generate-client><i class="fa fa-link" aria-hidden=true></i></a></h3><p>Generate two <code>personal</code> clients, one for the User and one for the Other</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4>#1</span>
</span></span><span style=display:flex><span>php artisan passport:client --personal
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>What should we name the personal access client? <span style=color:#ff79c6>[]</span>:
</span></span><span style=display:flex><span> &gt; User
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Personal access client created successfully.
</span></span><span style=display:flex><span>Client ID: <span style=color:#bd93f9>1</span>
</span></span><span style=display:flex><span>Client secret: 7KqVA8gPxRhPtFdfdsfsuVi4n3xpUBOEiNW4lPI
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4>#2</span>
</span></span><span style=display:flex><span>php artisan passport:client --personal
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>What should we name the personal access client? <span style=color:#ff79c6>[]</span>:
</span></span><span style=display:flex><span> &gt; Other
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Personal access client created successfully.
</span></span><span style=display:flex><span>Client ID: <span style=color:#bd93f9>2</span>
</span></span><span style=display:flex><span>Client secret: 7KqVA8gPxRhPtFdfdsfsuVi4n3xpUBOEiNW4fde
</span></span></code></pre></td></tr></table></div></div><h3 id=create-custom-access_tokens-model>Create custom access_tokens model
<a class=heading-link href=#create-custom-access_tokens-model><i class="fa fa-link" aria-hidden=true></i></a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>php artisan make<span style=color:#ff79c6>:</span>model OtherToken
</span></span></code></pre></td></tr></table></div></div><p><code>\app\OtherToken.php</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#ff79c6>&lt;?</span>php
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>namespace</span> App;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Illuminate\Database\Eloquent\Model;
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Laravel\Passport\Token;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4>//Important extends Laravel\Passport\Token
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>MiniToken</span> <span style=color:#ff79c6>extends</span> Token
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>protected</span> <span style=color:#8be9fd;font-style:italic>$table</span> <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;oauth_other_tokens&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>public</span> <span style=color:#ff79c6>function</span> <span style=color:#50fa7b>user</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#8be9fd;font-style:italic>$provider</span> <span style=color:#ff79c6>=</span> config(<span style=color:#f1fa8c>&#39;auth.guards.other.provider&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>return</span> <span style=color:#8be9fd;font-style:italic>$this</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>belongsTo</span>(config(<span style=color:#f1fa8c>&#39;auth.providers.&#39;</span><span style=color:#ff79c6>.</span><span style=color:#8be9fd;font-style:italic>$provider</span><span style=color:#ff79c6>.</span><span style=color:#f1fa8c>&#39;.model&#39;</span>));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=configure>Configure
<a class=heading-link href=#configure><i class="fa fa-link" aria-hidden=true></i></a></h3><p><code>\config\auth.php</code> Configure another user model</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>   <span style=color:#f1fa8c>&#39;guards&#39;</span> <span style=color:#ff79c6>=&gt;</span> [
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#39;web&#39;</span> <span style=color:#ff79c6>=&gt;</span> [
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#39;driver&#39;</span> <span style=color:#ff79c6>=&gt;</span> <span style=color:#f1fa8c>&#39;session&#39;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#39;provider&#39;</span> <span style=color:#ff79c6>=&gt;</span> <span style=color:#f1fa8c>&#39;users&#39;</span>,
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#39;api&#39;</span> <span style=color:#ff79c6>=&gt;</span> [
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#39;driver&#39;</span> <span style=color:#ff79c6>=&gt;</span> <span style=color:#f1fa8c>&#39;passport&#39;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#39;provider&#39;</span> <span style=color:#ff79c6>=&gt;</span> <span style=color:#f1fa8c>&#39;users&#39;</span>,
</span></span><span style=display:flex><span><span style=color:#6272a4>//            &#39;hash&#39; =&gt; false,
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>        ],
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#39;other&#39;</span> <span style=color:#ff79c6>=&gt;</span> [
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#39;driver&#39;</span> <span style=color:#ff79c6>=&gt;</span> <span style=color:#f1fa8c>&#39;passport&#39;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#39;provider&#39;</span> <span style=color:#ff79c6>=&gt;</span> <span style=color:#f1fa8c>&#39;others&#39;</span>,
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f1fa8c>&#39;providers&#39;</span> <span style=color:#ff79c6>=&gt;</span> [
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#39;users&#39;</span> <span style=color:#ff79c6>=&gt;</span> [
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#39;driver&#39;</span> <span style=color:#ff79c6>=&gt;</span> <span style=color:#f1fa8c>&#39;eloquent&#39;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#39;model&#39;</span> <span style=color:#ff79c6>=&gt;</span> App\User<span style=color:#ff79c6>::</span><span style=color:#50fa7b>class</span>,
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#39;others&#39;</span> <span style=color:#ff79c6>=&gt;</span> [
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#39;driver&#39;</span> <span style=color:#ff79c6>=&gt;</span> <span style=color:#f1fa8c>&#39;eloquent&#39;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#39;model&#39;</span> <span style=color:#ff79c6>=&gt;</span> App\Other<span style=color:#ff79c6>::</span><span style=color:#50fa7b>class</span>,
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#6272a4>// &#39;users&#39; =&gt; [
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>        <span style=color:#6272a4>//     &#39;driver&#39; =&gt; &#39;database&#39;,
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>        <span style=color:#6272a4>//     &#39;table&#39; =&gt; &#39;users&#39;,
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>        <span style=color:#6272a4>// ],
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>    ],
</span></span></code></pre></td></tr></table></div></div><h3 id=create-middleware>Create Middleware
<a class=heading-link href=#create-middleware><i class="fa fa-link" aria-hidden=true></i></a></h3><p>Create middleware for each of the two user routes, this middleware is mainly used to set the Token model corresponding to the Passport</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>php artisan make<span style=color:#ff79c6>:</span>middleware UserPassport
</span></span><span style=display:flex><span>php artisan make<span style=color:#ff79c6>:</span>middleware OtherPassport
</span></span></code></pre></td></tr></table></div></div><p>Setting up the response Token model in the middleware</p><p><code>\app\Http\Middleware\UserPassport.php</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#ff79c6>&lt;?</span>php
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>namespace</span> App\Http\Middleware;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Closure;
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Laravel\Passport\Passport;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>UserPassport</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>/**
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     * Handle an incoming request.
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     *
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     * @param  \Illuminate\Http\Request  $request
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     * @param  \Closure  $next
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     * @return mixed
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>public</span> <span style=color:#ff79c6>function</span> <span style=color:#50fa7b>handle</span>(<span style=color:#8be9fd;font-style:italic>$request</span>, Closure <span style=color:#8be9fd;font-style:italic>$next</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      	<span style=color:#6272a4>//The original Token model is used here
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>        Passport<span style=color:#ff79c6>::</span><span style=color:#50fa7b>useTokenModel</span>(<span style=color:#f1fa8c>&#39;Laravel\Passport\Token&#39;</span>);
</span></span><span style=display:flex><span>      	<span style=color:#6272a4>//Set ClientId
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>        Passport<span style=color:#ff79c6>::</span><span style=color:#50fa7b>personalAccessClientId</span>(config(<span style=color:#f1fa8c>&#39;auth.clients.api&#39;</span>));
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>return</span> <span style=color:#8be9fd;font-style:italic>$next</span>(<span style=color:#8be9fd;font-style:italic>$request</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p><code>\app\Http\Middleware\OtherPassport</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#ff79c6>&lt;?</span>php
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>namespace</span> App\Http\Middleware;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Closure;
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Laravel\Passport\Passport;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>MiniPassport</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>/**
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     * Handle an incoming request.
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     *
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     * @param  \Illuminate\Http\Request  $request
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     * @param  \Closure  $next
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     * @return mixed
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>public</span> <span style=color:#ff79c6>function</span> <span style=color:#50fa7b>handle</span>(<span style=color:#8be9fd;font-style:italic>$request</span>, Closure <span style=color:#8be9fd;font-style:italic>$next</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      	<span style=color:#6272a4>//Using a custom Token model
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>        Passport<span style=color:#ff79c6>::</span><span style=color:#50fa7b>useTokenModel</span>(<span style=color:#f1fa8c>&#39;App\MiniToken&#39;</span>);
</span></span><span style=display:flex><span>      	<span style=color:#6272a4>//Set ClientId
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>        Passport<span style=color:#ff79c6>::</span><span style=color:#50fa7b>personalAccessClientId</span>(config(<span style=color:#f1fa8c>&#39;auth.clients.other&#39;</span>));
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>return</span> <span style=color:#8be9fd;font-style:italic>$next</span>(<span style=color:#8be9fd;font-style:italic>$request</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=register-middleware>Register Middleware
<a class=heading-link href=#register-middleware><i class="fa fa-link" aria-hidden=true></i></a></h3><p><code>app\Http\Kernel.php</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#ff79c6>protected</span> <span style=color:#8be9fd;font-style:italic>$middlewareGroups</span> <span style=color:#ff79c6>=</span> [
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#39;web&#39;</span> <span style=color:#ff79c6>=&gt;</span> [
</span></span><span style=display:flex><span>            \App\Http\Middleware\EncryptCookies<span style=color:#ff79c6>::</span><span style=color:#50fa7b>class</span>,
</span></span><span style=display:flex><span>            \Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse<span style=color:#ff79c6>::</span><span style=color:#50fa7b>class</span>,
</span></span><span style=display:flex><span>            \Illuminate\Session\Middleware\StartSession<span style=color:#ff79c6>::</span><span style=color:#50fa7b>class</span>,
</span></span><span style=display:flex><span>            <span style=color:#6272a4>// \Illuminate\Session\Middleware\AuthenticateSession::class,
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>            \Illuminate\View\Middleware\ShareErrorsFromSession<span style=color:#ff79c6>::</span><span style=color:#50fa7b>class</span>,
</span></span><span style=display:flex><span>            \App\Http\Middleware\VerifyCsrfToken<span style=color:#ff79c6>::</span><span style=color:#50fa7b>class</span>,
</span></span><span style=display:flex><span>            \Illuminate\Routing\Middleware\SubstituteBindings<span style=color:#ff79c6>::</span><span style=color:#50fa7b>class</span>,
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#39;api&#39;</span> <span style=color:#ff79c6>=&gt;</span> [
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#39;throttle:60,1&#39;</span>,
</span></span><span style=display:flex><span>            \Illuminate\Routing\Middleware\SubstituteBindings<span style=color:#ff79c6>::</span><span style=color:#50fa7b>class</span>,
</span></span><span style=display:flex><span>						\App\Http\Middleware\ApiPassport<span style=color:#ff79c6>::</span><span style=color:#50fa7b>class</span>,
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#39;other&#39;</span> <span style=color:#ff79c6>=&gt;</span> [
</span></span><span style=display:flex><span>            <span style=color:#f1fa8c>&#39;throttle:60,1&#39;</span>,
</span></span><span style=display:flex><span>            \Illuminate\Routing\Middleware\SubstituteBindings<span style=color:#ff79c6>::</span><span style=color:#50fa7b>class</span>,
</span></span><span style=display:flex><span>            \App\Http\Middleware\MiniPassport<span style=color:#ff79c6>::</span><span style=color:#50fa7b>class</span>,
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>    ];
</span></span></code></pre></td></tr></table></div></div><h3 id=set-token-expiration-time>Set Token Expiration Time
<a class=heading-link href=#set-token-expiration-time><i class="fa fa-link" aria-hidden=true></i></a></h3><p><code>app\Providers\AuthServiceProvider.php</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#ff79c6>&lt;?</span>php
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>namespace</span> App\Providers;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Carbon\Carbon;
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Illuminate\Foundation\Support\Providers\AuthServiceProvider <span style=color:#ff79c6>as</span> ServiceProvider;
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Illuminate\Support\Facades\Gate;
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Laravel\Passport\Client;
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Laravel\Passport\Passport;
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Laravel\Passport\RouteRegistrar;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>AuthServiceProvider</span> <span style=color:#ff79c6>extends</span> ServiceProvider
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>/**
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     * The policy mappings for the application.
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     *
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     * @var array
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>protected</span> <span style=color:#8be9fd;font-style:italic>$policies</span> <span style=color:#ff79c6>=</span> [
</span></span><span style=display:flex><span>        <span style=color:#6272a4>// &#39;App\Model&#39; =&gt; &#39;App\Policies\ModelPolicy&#39;,
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>    ];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>/**
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     * Register any authentication / authorization services.
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     *
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     * @return void
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>public</span> <span style=color:#ff79c6>function</span> <span style=color:#50fa7b>boot</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#8be9fd;font-style:italic>$this</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>registerPolicies</span>();
</span></span><span style=display:flex><span>        <span style=color:#6272a4>//The default token issuance is valid forever
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>
</span></span><span style=display:flex><span>        Passport<span style=color:#ff79c6>::</span><span style=color:#50fa7b>personalAccessTokensExpireIn</span>(Carbon<span style=color:#ff79c6>::</span><span style=color:#50fa7b>now</span>()<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>addWeeks</span>(<span style=color:#bd93f9>2</span>));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=model-use-trait>Model Use Trait
<a class=heading-link href=#model-use-trait><i class="fa fa-link" aria-hidden=true></i></a></h3><p>Both the <code>User</code> model and the <code>Other</code> model should <code>Use HasApiTokens</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>Other</span> <span style=color:#ff79c6>extends</span> Authenticatable
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>use</span> HasApiTokens,Notifiable;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>protected</span> <span style=color:#8be9fd;font-style:italic>$table</span> <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;drivers&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>protected</span> <span style=color:#8be9fd;font-style:italic>$appends</span> <span style=color:#ff79c6>=</span> [<span style=color:#f1fa8c>&#39;user_name&#39;</span>,<span style=color:#f1fa8c>&#39;company_name&#39;</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>public</span> <span style=color:#ff79c6>function</span> <span style=color:#50fa7b>getUserNameAttribute</span>(){
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>return</span> <span style=color:#8be9fd;font-style:italic>$this</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>hasOne</span>(<span style=color:#f1fa8c>&#39;App\User&#39;</span>,<span style=color:#f1fa8c>&#39;id&#39;</span>,<span style=color:#f1fa8c>&#39;user_id&#39;</span>)<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>value</span>(<span style=color:#f1fa8c>&#39;email&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>public</span> <span style=color:#ff79c6>function</span> <span style=color:#50fa7b>getCompanyNameAttribute</span>(){
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>return</span> <span style=color:#8be9fd;font-style:italic>$this</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>hasOne</span>(<span style=color:#f1fa8c>&#39;App\company&#39;</span>,<span style=color:#f1fa8c>&#39;id&#39;</span>,<span style=color:#f1fa8c>&#39;company_id&#39;</span>)<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>value</span>(<span style=color:#f1fa8c>&#39;company_code&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4>// The same goes for the User model
</span></span></span></code></pre></td></tr></table></div></div><h3 id=format-response-messages>Format response messages
<a class=heading-link href=#format-response-messages><i class="fa fa-link" aria-hidden=true></i></a></h3><p>Authentication failure returns formatted json data</p><p>In <code>\app\Exceptions\Handler.php</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#ff79c6>public</span> <span style=color:#ff79c6>function</span> <span style=color:#50fa7b>render</span>(<span style=color:#8be9fd;font-style:italic>$request</span>, Exception <span style=color:#8be9fd;font-style:italic>$exception</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>  			<span style=color:#6272a4>//Determine the route
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>        <span style=color:#ff79c6>if</span> (<span style=color:#8be9fd;font-style:italic>$request</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>is</span>(<span style=color:#f1fa8c>&#39;api/*&#39;</span>) <span style=color:#ff79c6>||</span> <span style=color:#8be9fd;font-style:italic>$request</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>is</span>(<span style=color:#f1fa8c>&#39;other/*&#39;</span>)){
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>if</span> (<span style=color:#8be9fd;font-style:italic>$exception</span> instanceof ValidationException){
</span></span><span style=display:flex><span>              <span style=color:#6272a4>//$this-&gt;error is a Trait that returns JSON data, you can wrap it yourself, not shown here
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>                <span style=color:#ff79c6>return</span> <span style=color:#8be9fd;font-style:italic>$this</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>error</span>(current(<span style=color:#8be9fd;font-style:italic>$exception</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>errors</span>())[<span style=color:#bd93f9>0</span>],<span style=color:#bd93f9>42200</span>,<span style=color:#8be9fd;font-style:italic>$exception</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>status</span>);
</span></span><span style=display:flex><span>            }<span style=color:#ff79c6>elseif</span>(<span style=color:#8be9fd;font-style:italic>$exception</span> instanceof AuthenticationException){
</span></span><span style=display:flex><span>                <span style=color:#ff79c6>return</span> <span style=color:#8be9fd;font-style:italic>$this</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>error</span>(<span style=color:#f1fa8c>&#39;Unauthorized&#39;</span>,<span style=color:#bd93f9>40100</span>,<span style=color:#bd93f9>401</span>);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>return</span> <span style=color:#ff79c6>parent</span><span style=color:#ff79c6>::</span><span style=color:#50fa7b>render</span>(<span style=color:#8be9fd;font-style:italic>$request</span>, <span style=color:#8be9fd;font-style:italic>$exception</span>);
</span></span><span style=display:flex><span>    }
</span></span></code></pre></td></tr></table></div></div><h2 id=use>Use
<a class=heading-link href=#use><i class="fa fa-link" aria-hidden=true></i></a></h2><p>Custom routing files to solve their own :D</p><h3 id=router>Router
<a class=heading-link href=#router><i class="fa fa-link" aria-hidden=true></i></a></h3><p><code>\routes\api.php</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#ff79c6>&lt;?</span>php
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Illuminate\Http\Request;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4>/*
</span></span></span><span style=display:flex><span><span style=color:#6272a4>|--------------------------------------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#6272a4>| API Routes
</span></span></span><span style=display:flex><span><span style=color:#6272a4>|--------------------------------------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#6272a4>|
</span></span></span><span style=display:flex><span><span style=color:#6272a4>| Here is where you can register API routes for your application. These
</span></span></span><span style=display:flex><span><span style=color:#6272a4>| routes are loaded by the RouteServiceProvider within a group which
</span></span></span><span style=display:flex><span><span style=color:#6272a4>| is assigned the &#34;api&#34; middleware group. Enjoy building your API!
</span></span></span><span style=display:flex><span><span style=color:#6272a4>|
</span></span></span><span style=display:flex><span><span style=color:#6272a4>*/</span>
</span></span><span style=display:flex><span>Route<span style=color:#ff79c6>::</span><span style=color:#50fa7b>prefix</span>(<span style=color:#f1fa8c>&#39;v1&#39;</span>)<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>group</span>(<span style=color:#ff79c6>function</span> (){
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Route<span style=color:#ff79c6>::</span><span style=color:#50fa7b>get</span>(<span style=color:#f1fa8c>&#39;login&#39;</span>, <span style=color:#f1fa8c>&#39;UserController@login&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Route<span style=color:#ff79c6>::</span><span style=color:#50fa7b>middleware</span>(<span style=color:#f1fa8c>&#39;auth:api&#39;</span>)<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>group</span>(<span style=color:#ff79c6>function</span> (){
</span></span><span style=display:flex><span>        Route<span style=color:#ff79c6>::</span><span style=color:#50fa7b>get</span>(<span style=color:#f1fa8c>&#39;/user&#39;</span>,<span style=color:#ff79c6>function</span>(Request <span style=color:#8be9fd;font-style:italic>$request</span>){
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>return</span> auth()<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>user</span>();
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>});
</span></span></code></pre></td></tr></table></div></div><p><code>\routes\other.php</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#ff79c6>&lt;?</span>php
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Illuminate\Http\Request;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4>/*
</span></span></span><span style=display:flex><span><span style=color:#6272a4>|--------------------------------------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#6272a4>| Other Routes
</span></span></span><span style=display:flex><span><span style=color:#6272a4>|--------------------------------------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#6272a4>|
</span></span></span><span style=display:flex><span><span style=color:#6272a4>| Here is where you can register Other routes for your application. These
</span></span></span><span style=display:flex><span><span style=color:#6272a4>| routes are loaded by the RouteServiceProvider within a group which
</span></span></span><span style=display:flex><span><span style=color:#6272a4>| is assigned the &#34;other&#34; middleware group. Enjoy building your Other!
</span></span></span><span style=display:flex><span><span style=color:#6272a4>|
</span></span></span><span style=display:flex><span><span style=color:#6272a4>*/</span>
</span></span><span style=display:flex><span>Route<span style=color:#ff79c6>::</span><span style=color:#50fa7b>prefix</span>(<span style=color:#f1fa8c>&#39;v1&#39;</span>)<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>group</span>(<span style=color:#ff79c6>function</span> (){
</span></span><span style=display:flex><span>    Route<span style=color:#ff79c6>::</span><span style=color:#50fa7b>get</span>(<span style=color:#f1fa8c>&#39;/login&#39;</span>,<span style=color:#f1fa8c>&#39;OtherController@login&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Route<span style=color:#ff79c6>::</span><span style=color:#50fa7b>middleware</span>(<span style=color:#f1fa8c>&#39;auth:other&#39;</span>)<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>group</span>(<span style=color:#ff79c6>function</span> (){
</span></span><span style=display:flex><span>        Route<span style=color:#ff79c6>::</span><span style=color:#50fa7b>get</span>(<span style=color:#f1fa8c>&#39;/other&#39;</span>,<span style=color:#ff79c6>function</span>(Request <span style=color:#8be9fd;font-style:italic>$request</span>){
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>return</span> auth()<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>user</span>();
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>});
</span></span></code></pre></td></tr></table></div></div><h3 id=issuing-token-to-user>Issuing Token to User
<a class=heading-link href=#issuing-token-to-user><i class="fa fa-link" aria-hidden=true></i></a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#ff79c6>&lt;?</span>php
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>namespace</span> App\Http\Controllers;
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> App\User;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>UserController</span> <span style=color:#ff79c6>extends</span> Controller
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>public</span> <span style=color:#ff79c6>function</span> <span style=color:#50fa7b>login</span>(LoginPost <span style=color:#8be9fd;font-style:italic>$request</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#8be9fd;font-style:italic>$user</span> <span style=color:#ff79c6>=</span> User<span style=color:#ff79c6>::</span><span style=color:#50fa7b>find</span>(<span style=color:#bd93f9>1</span>);
</span></span><span style=display:flex><span>       <span style=color:#ff79c6>return</span> <span style=color:#8be9fd;font-style:italic>$user</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>createToken</span>(<span style=color:#f1fa8c>&#39;Api&#39;</span>,[<span style=color:#f1fa8c>&#39;*&#39;</span>])<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>accessToken</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=issuing-token-to-other>Issuing Token to Other
<a class=heading-link href=#issuing-token-to-other><i class="fa fa-link" aria-hidden=true></i></a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#ff79c6>&lt;?</span>php
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>namespace</span> App\Http\Controllers;
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> App\Other;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>UserController</span> <span style=color:#ff79c6>extends</span> Controller
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>public</span> <span style=color:#ff79c6>function</span> <span style=color:#50fa7b>login</span>(LoginPost <span style=color:#8be9fd;font-style:italic>$request</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#8be9fd;font-style:italic>$other</span> <span style=color:#ff79c6>=</span> Other<span style=color:#ff79c6>::</span><span style=color:#50fa7b>find</span>(<span style=color:#bd93f9>1</span>);
</span></span><span style=display:flex><span>       <span style=color:#ff79c6>return</span> <span style=color:#8be9fd;font-style:italic>$other</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>createToken</span>(<span style=color:#f1fa8c>&#39;Other&#39;</span>,[<span style=color:#f1fa8c>&#39;*&#39;</span>])<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>accessToken</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=get-user-information-based-on-token>Get User information based on Token
<a class=heading-link href=#get-user-information-based-on-token><i class="fa fa-link" aria-hidden=true></i></a></h3><p>It is specified in the routing that Headers carry Authorization = Bearer $token when requested</p><h2 id=test>Test
<a class=heading-link href=#test><i class="fa fa-link" aria-hidden=true></i></a></h2><h3 id=get-apiv1login>Get api/v1/login
<a class=heading-link href=#get-apiv1login><i class="fa fa-link" aria-hidden=true></i></a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;success&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#ff79c6>true</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;error_code&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>0</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;message&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;Success&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;data&#34;</span><span style=color:#ff79c6>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#34;token_type&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;Bearer&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#34;access_token&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiZGQ2ZmMzNjYwNmU4YjNhNWU1YWQxODMyNDRlNWNlM2JiY2FkNTFkNjc2MGJkZjUxOWMwNzFkNzdiZDY5YjAzZmNlNjc1ZTM0NmQ1MWNkNDUiLCJpYXQiOjE1ODUzMzQwNzgsIm5iZiI6MTU4NTMzNDA3OCwiZXhwIjoxNTg2NTQzNjc3LCJzdWIiOiIyIiwic2NvcGVzIjpbIioiXX0.sQKSS9WCdhMp8_5GTSkQ_sqGMiTVxdVXomub3i3DI3h1xCoAPWYH_rj8W8uTjlX82wzIsFjn0bSKhqTeZFRQDFZWYN-2MatgBk-i6P0dxm-x97sIPfCRMm-omkXIvdWjeJyt...&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=get-otherv1login>Get other/v1/login
<a class=heading-link href=#get-otherv1login><i class="fa fa-link" aria-hidden=true></i></a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JavaScript data-lang=JavaScript><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;success&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#ff79c6>true</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;error_code&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>0</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;message&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;Success&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;data&#34;</span><span style=color:#ff79c6>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#34;token_type&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;Bearer&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#34;access_token&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIyIiwianRpIjoiZmM0NDQzZmQwZmEwYmMzMTNjM2JlMmE5NjUyNzBiYjc5Y2IwMDBmODM0YzkwNzg1M2U1Y2E1NWY5ZDJjODNhOTM5Y2M0YTU1Mjg4MTJlNTQiLCJpYXQiOjE1ODUzMzQxNDUsIm5iZiI6MTU4NTMzNDE0NSwiZXhwIjoxNTg2NTQzNzQ1LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.LCXpbAQnFTatXyDJtMZmFitt6mo4_h42CqOd3hbnx...&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=get-apiv1user>Get api/v1/user
<a class=heading-link href=#get-apiv1user><i class="fa fa-link" aria-hidden=true></i></a></h3><ul><li>Carries the Token returned by <code>api/v1/login</code></li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;id&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>2</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;email&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;test@gmail.com&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;sms_verified_at&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#ff79c6>null</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;created_at&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;2020-03-15 23:58:39&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;updated_at&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;2020-03-15 23:58:39&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;check_company_status&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><ul><li>Carries the Token returned by <code>other/v1/login</code></li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;success&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#ff79c6>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;error_code&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>40100</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;message&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;Unauthorized&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;data&#34;</span><span style=color:#ff79c6>:</span> []
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=get-otherv1other>Get other/v1/other
<a class=heading-link href=#get-otherv1other><i class="fa fa-link" aria-hidden=true></i></a></h3><ul><li>Carries the Token returned by <code>api/v1/login</code></li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;id&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>1</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;user_id&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>1</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;name&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;test&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;phone&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;174****0527&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;created_at&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;2020-03-20 00:32:55&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;updated_at&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;2020-03-20 00:32:55&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;user_name&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;mrnicolascoge@gmail.com&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;company_name&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;Google&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><ul><li>Carries the Token returned by <code>other/v1/login</code></li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;success&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#ff79c6>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;error_code&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>40100</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;message&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;Unauthorized&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;data&#34;</span><span style=color:#ff79c6>:</span> []
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=problems>Problems
<a class=heading-link href=#problems><i class="fa fa-link" aria-hidden=true></i></a></h3><p>It can be seen that it does not meet the demand, using the API issued Token can get to the information of the two users, while Other issued Token is not authorized, Bye Bye ~!</p><p>Haha, just kidding, it turns out that there is an order of middleware execution, so changing the order of middleware execution can be.</p><p><code>\app\Http\Kernel.php</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>		<span style=color:#6272a4>//Find this...
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>    <span style=color:#ff79c6>protected</span> <span style=color:#8be9fd;font-style:italic>$middlewarePriority</span> <span style=color:#ff79c6>=</span> [
</span></span><span style=display:flex><span>      	<span style=color:#6272a4>// 1
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>        \App\Http\Middleware\OtherPassport<span style=color:#ff79c6>::</span><span style=color:#50fa7b>class</span>,
</span></span><span style=display:flex><span>        <span style=color:#6272a4>// 2
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>        \App\Http\Middleware\ApiPassport<span style=color:#ff79c6>::</span><span style=color:#50fa7b>class</span>,
</span></span><span style=display:flex><span>        \Illuminate\Session\Middleware\StartSession<span style=color:#ff79c6>::</span><span style=color:#50fa7b>class</span>,
</span></span><span style=display:flex><span>        \Illuminate\View\Middleware\ShareErrorsFromSession<span style=color:#ff79c6>::</span><span style=color:#50fa7b>class</span>,
</span></span><span style=display:flex><span>        \App\Http\Middleware\Authenticate<span style=color:#ff79c6>::</span><span style=color:#50fa7b>class</span>,
</span></span><span style=display:flex><span>        \Illuminate\Routing\Middleware\ThrottleRequests<span style=color:#ff79c6>::</span><span style=color:#50fa7b>class</span>,
</span></span><span style=display:flex><span>        \Illuminate\Session\Middleware\AuthenticateSession<span style=color:#ff79c6>::</span><span style=color:#50fa7b>class</span>,
</span></span><span style=display:flex><span>        \Illuminate\Routing\Middleware\SubstituteBindings<span style=color:#ff79c6>::</span><span style=color:#50fa7b>class</span>,
</span></span><span style=display:flex><span>        \Illuminate\Auth\Middleware\Authorize<span style=color:#ff79c6>::</span><span style=color:#50fa7b>class</span>,
</span></span><span style=display:flex><span>    ];
</span></span></code></pre></td></tr></table></div></div><h2 id=completion>Completion
<a class=heading-link href=#completion><i class="fa fa-link" aria-hidden=true></i></a></h2><h3 id=get-apiv1user-1>Get api/v1/user
<a class=heading-link href=#get-apiv1user-1><i class="fa fa-link" aria-hidden=true></i></a></h3><ul><li>Carries the Token returned by <code>api/v1/login</code></li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;id&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>2</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;email&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;test@gmail.com&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;sms_verified_at&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#ff79c6>null</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;created_at&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;2020-03-15 23:58:39&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;updated_at&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;2020-03-15 23:58:39&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;check_company_status&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><ul><li>Carries the Token returned by <code>other/v1/login</code></li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;success&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#ff79c6>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;error_code&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>40100</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;message&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;Unauthorized&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;data&#34;</span><span style=color:#ff79c6>:</span> []
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=get-otherv1other-1>Get other/v1/other
<a class=heading-link href=#get-otherv1other-1><i class="fa fa-link" aria-hidden=true></i></a></h3><ul><li>Carries the Token returned by <code>api/v1/login</code></li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;success&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#ff79c6>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;error_code&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>40100</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;message&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;Unauthorized&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;data&#34;</span><span style=color:#ff79c6>:</span> []
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><ul><li>Carries the Token returned by <code>other/v1/login</code></li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;id&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>1</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;user_id&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>1</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;name&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;test&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;phone&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;174****0527&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;created_at&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;2020-03-20 00:32:55&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;updated_at&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;2020-03-20 00:32:55&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;user_name&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;mrnicolascoge@gmail.com&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;company_name&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;Google&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=above-done>Above Done
<a class=heading-link href=#above-done><i class="fa fa-link" aria-hidden=true></i></a></h3><p>Thank you, if there is any better way please leave a message ~</p></div><footer></footer></article></section></div><footer class=footer><section class=container>Â©
2019 -
2022
Ethan Kuo
Â·
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/coder.min.8fb86376a16e684af472a329aef502dbebcfab65ce264e9750d144912947c602.js integrity="sha256-j7hjdqFuaEr0cqMprvUC2+vPq2XOJk6XUNFEkSlHxgI="></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NK08XEDHKZ"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-NK08XEDHKZ")</script></body></html>