<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">

    
      <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests; block-all-mixed-content; default-src 'self'; child-src 'self'; font-src 'self' https://fonts.gstatic.com https://cdn.jsdelivr.net/; form-action 'self'; frame-src 'self'; img-src 'self'; object-src 'none'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com/ https://cdn.jsdelivr.net/; script-src 'self' 'unsafe-inline' https://www.google-analytics.com https://cdn.jsdelivr.net/; prefetch-src 'self'; connect-src 'self' https://www.google-analytics.com;">

    

    <meta name="author" content="Ethan Kuo">
    <meta name="description" content="Preface    Copied the bonus class written by someone else and it feels pretty good to use. The original address is in the comments. Hereby record
Code    1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177  &lt;?">
    <meta name="keywords" content="php,Red Packet">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Red Packet Class"/>
<meta name="twitter:description" content="Preface    Copied the bonus class written by someone else and it feels pretty good to use. The original address is in the comments. Hereby record
Code    1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177  &lt;?"/>

    <meta property="og:title" content="Red Packet Class" />
<meta property="og:description" content="Preface    Copied the bonus class written by someone else and it feels pretty good to use. The original address is in the comments. Hereby record
Code    1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177  &lt;?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://chaosirgit.github.io/posts/red-packet-class/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-03-16T10:39:09+00:00" />
<meta property="article:modified_time" content="2019-03-16T10:39:09+00:00" />



    <title>
  Red Packet Class · Ethan Kuo Blog
</title>

    
      <link rel="canonical" href="http://chaosirgit.github.io/posts/red-packet-class/">
    

    <link rel="preload" href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as="font" type="font/woff2" crossorigin>

    
      
      
      <link rel="stylesheet" href="/css/coder.min.d9fddbffe6f27e69985dc5fe0471cdb0e57fbf4775714bc3d847accb08f4a1f6.css" integrity="sha256-2f3b/&#43;byfmmYXcX&#43;BHHNsOV/v0d1cUvD2Eesywj0ofY=" crossorigin="anonymous" media="screen" />
    

    

    
      
        
        
        <link rel="stylesheet" href="/css/coder-dark.min.002ee2378e14c7a68f1f0a53d9694ed252090987c4e768023fac694a4fc5f793.css" integrity="sha256-AC7iN44Ux6aPHwpT2WlO0lIJCYfE52gCP6xpSk/F95M=" crossorigin="anonymous" media="screen" />
      
    

    

    

    <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

    <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

    <meta name="generator" content="Hugo 0.89.1" />

<script async src="https://www.googletagmanager.com/gtag/js?id=G-NK08XEDHKZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NK08XEDHKZ');
</script>
  </head>

  
  
    
  
  <body class="preload-transitions colorscheme-dark">
    
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="/">
      Ethan Kuo Blog
    </a>
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link" href="/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/posts/">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/contact/">Contact me</a>
            </li>
          
        
        
          
          
          
            
          
            
              
                <li class="navigation-item menu-separator">
                  <span>|</span>
                </li>
                
              
              <li class="navigation-item">
                <a href="http://chaosirgit.github.io/zh-cn/">🇨🇳</a>
              </li>
            
          
        
      </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://chaosirgit.github.io/posts/red-packet-class/">
              Red Packet Class
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa fa-calendar" aria-hidden="true"></i>
              <time datetime="2019-03-16T10:39:09Z">
                2019-03-16 10:39:09
              </time>
            </span>
            <span class="reading-time">
              <i class="fa fa-clock-o" aria-hidden="true"></i>
              4-minute read
            </span>
          </div>
          
          <div class="categories">
  <i class="fa fa-folder" aria-hidden="true"></i>
    <a href="/categories/technology/">Technology</a></div>

          <div class="tags">
  <i class="fa fa-tag" aria-hidden="true"></i>
    <span class="tag">
      <a href="/tags/php/">php</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/red-packet/">Red Packet</a>
    </span></div>

        </div>
      </header>

      <div>
        
        <h2 id="preface">
  Preface
  <a class="heading-link" href="#preface">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h2>
<p>Copied the bonus class written by someone else and it feels pretty good to use. The original address is in the comments. Hereby record</p>
<h2 id="code">
  Code
  <a class="heading-link" href="#code">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h2>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">118
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">119
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">120
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">121
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">122
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">123
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">124
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">125
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">126
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">127
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">128
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">129
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">130
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">131
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">132
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">133
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">134
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">135
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">136
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">137
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">138
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">139
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">140
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">141
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">142
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">143
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">144
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">145
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">146
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">147
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">148
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">149
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">150
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">151
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">152
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">153
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">154
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">155
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">156
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">157
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">158
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">159
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">160
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">161
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">162
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">163
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">164
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">165
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">166
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">167
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">168
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">169
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">170
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">171
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">172
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">173
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">174
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">175
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">176
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">177
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#ff79c6">&lt;?</span>php

<span style="color:#ff79c6">namespace</span> App\Utils;
<span style="color:#f1fa8c">/**
</span><span style="color:#f1fa8c">   * Red Packet Distribution Algorithm
</span><span style="color:#f1fa8c"> *
</span><span style="color:#f1fa8c"> * example
</span><span style="color:#f1fa8c"> *      $coupon = new Coupon(200, 5);
</span><span style="color:#f1fa8c"> *      $res = $coupon-&gt;handle();
</span><span style="color:#f1fa8c"> *      print_r($res);
</span><span style="color:#f1fa8c"> *
</span><span style="color:#f1fa8c"> * @author Flc &lt;2018-04-06 20:09:53&gt;
</span><span style="color:#f1fa8c"> * @see http://flc.ren | http://flc.io | https://github.com/flc1125
</span><span style="color:#f1fa8c"> */</span>
<span style="color:#ff79c6">class</span> <span style="color:#50fa7b">Coupon</span>
{
    <span style="color:#f1fa8c">/**
</span><span style="color:#f1fa8c">     * Red Packet Amount
</span><span style="color:#f1fa8c">     *
</span><span style="color:#f1fa8c">     * @var float
</span><span style="color:#f1fa8c">     */</span>
    <span style="color:#ff79c6">protected</span> <span style="color:#8be9fd;font-style:italic">$amount</span>;

    <span style="color:#f1fa8c">/**
</span><span style="color:#f1fa8c">     * Number of red packets
</span><span style="color:#f1fa8c">     *
</span><span style="color:#f1fa8c">     * @var int
</span><span style="color:#f1fa8c">     */</span>
    <span style="color:#ff79c6">protected</span> <span style="color:#8be9fd;font-style:italic">$num</span>;

    <span style="color:#f1fa8c">/**
</span><span style="color:#f1fa8c">     * The minimum amount of red packets received
</span><span style="color:#f1fa8c">     *
</span><span style="color:#f1fa8c">     * @var float
</span><span style="color:#f1fa8c">     */</span>
    <span style="color:#ff79c6">protected</span> <span style="color:#8be9fd;font-style:italic">$coupon_min</span>;

    <span style="color:#f1fa8c">/**
</span><span style="color:#f1fa8c">     * Red Packet Distribution Results
</span><span style="color:#f1fa8c">     *
</span><span style="color:#f1fa8c">     * @var array
</span><span style="color:#f1fa8c">     */</span>
    <span style="color:#ff79c6">protected</span> <span style="color:#8be9fd;font-style:italic">$items</span> <span style="color:#ff79c6">=</span> [];

    <span style="color:#f1fa8c">/**
</span><span style="color:#f1fa8c">     * init
</span><span style="color:#f1fa8c">     *
</span><span style="color:#f1fa8c">     * @param float $amount     Red packet amount (unit: yuan) retain up to 2 decimal places
</span><span style="color:#f1fa8c">     * @param int   $num        Number of red packets
</span><span style="color:#f1fa8c">     * @param float $coupon_min The amount of each red packet received at least
</span><span style="color:#f1fa8c">     */</span>
    <span style="color:#ff79c6">public</span> <span style="color:#ff79c6">function</span> __construct(<span style="color:#8be9fd;font-style:italic">$amount</span>, <span style="color:#8be9fd;font-style:italic">$num</span> <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span>, <span style="color:#8be9fd;font-style:italic">$coupon_min</span> <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0.01</span>)
    {
        <span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">amount</span> <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">$amount</span>;
        <span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">num</span> <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">$num</span>;
        <span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">coupon_min</span> <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">$coupon_min</span>;
    }

    <span style="color:#f1fa8c">/**
</span><span style="color:#f1fa8c">     * Processing Returns
</span><span style="color:#f1fa8c">     *
</span><span style="color:#f1fa8c">     * @return array
</span><span style="color:#f1fa8c">     */</span>
    <span style="color:#ff79c6">public</span> <span style="color:#ff79c6">function</span> <span style="color:#50fa7b">handle</span>()
    {
        <span style="color:#6272a4">// A. Validation
</span><span style="color:#6272a4"></span>        <span style="color:#ff79c6">if</span> (<span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">amount</span> <span style="color:#ff79c6">&lt;</span> <span style="color:#8be9fd;font-style:italic">$validAmount</span> <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">coupon_min</span> <span style="color:#ff79c6">*</span> <span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">num</span>) {
            <span style="color:#ff79c6">throw</span> <span style="color:#ff79c6">new</span> \Exception(<span style="color:#f1fa8c">&#39;红包总金额必须≥&#39;</span><span style="color:#ff79c6">.</span><span style="color:#8be9fd;font-style:italic">$validAmount</span><span style="color:#ff79c6">.</span><span style="color:#f1fa8c">&#39;元&#39;</span>);
        }

        <span style="color:#6272a4">// B. Distribute Red Packages
</span><span style="color:#6272a4"></span>        <span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">apportion</span>();

        <span style="color:#ff79c6">return</span> [
            <span style="color:#f1fa8c">&#39;items&#39;</span> <span style="color:#ff79c6">=&gt;</span> <span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">items</span>,
        ];
    }

    <span style="color:#f1fa8c">/**
</span><span style="color:#f1fa8c">     * Distribute Red Packages
</span><span style="color:#f1fa8c">     */</span>
    <span style="color:#ff79c6">protected</span> <span style="color:#ff79c6">function</span> <span style="color:#50fa7b">apportion</span>()
    {
        <span style="color:#8be9fd;font-style:italic">$num</span> <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">num</span>;  <span style="color:#6272a4">// Number of red packets left to be allocated
</span><span style="color:#6272a4"></span>        <span style="color:#8be9fd;font-style:italic">$amount</span> <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">amount</span>;  <span style="color:#6272a4">//The remaining amount of red packets available for collection
</span><span style="color:#6272a4"></span>
        <span style="color:#ff79c6">while</span> (<span style="color:#8be9fd;font-style:italic">$num</span> <span style="color:#ff79c6">&gt;=</span> <span style="color:#bd93f9">1</span>) {
            <span style="color:#6272a4">// When one is left, take the remaining red packets directly
</span><span style="color:#6272a4"></span>            <span style="color:#ff79c6">if</span> (<span style="color:#8be9fd;font-style:italic">$num</span> <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">1</span>) {
                <span style="color:#8be9fd;font-style:italic">$coupon_amount</span> <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">decimal_number</span>(<span style="color:#8be9fd;font-style:italic">$amount</span>);
            } <span style="color:#ff79c6">else</span> {
                <span style="color:#8be9fd;font-style:italic">$avg_amount</span> <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">decimal_number</span>(<span style="color:#8be9fd;font-style:italic">$amount</span> <span style="color:#ff79c6">/</span> <span style="color:#8be9fd;font-style:italic">$num</span>);  <span style="color:#6272a4">// The average amount of the remaining red packets
</span><span style="color:#6272a4"></span>
                <span style="color:#8be9fd;font-style:italic">$coupon_amount</span> <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">decimal_number</span>(
                    <span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">calcCouponAmount</span>(<span style="color:#8be9fd;font-style:italic">$avg_amount</span>, <span style="color:#8be9fd;font-style:italic">$amount</span>, <span style="color:#8be9fd;font-style:italic">$num</span>)
                );
            }

            <span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">items</span>[] <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">$coupon_amount</span>; <span style="color:#6272a4">// Additional Distribution
</span><span style="color:#6272a4"></span>
            <span style="color:#8be9fd;font-style:italic">$amount</span> <span style="color:#ff79c6">-=</span> <span style="color:#8be9fd;font-style:italic">$coupon_amount</span>;
            <span style="color:#ff79c6">--</span><span style="color:#8be9fd;font-style:italic">$num</span>;
        }

        shuffle(<span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">items</span>);  <span style="color:#6272a4">//Random disruptions
</span><span style="color:#6272a4"></span>    }

    <span style="color:#f1fa8c">/**
</span><span style="color:#f1fa8c">     * Calculate the amount of bonus package allocated
</span><span style="color:#f1fa8c">     *
</span><span style="color:#f1fa8c">     * @param float $avg_amount Average amount per calculation
</span><span style="color:#f1fa8c">     * @param float $amount     Remaining claimable amount
</span><span style="color:#f1fa8c">     * @param int   $num        Number of red packets left to receive
</span><span style="color:#f1fa8c">     *
</span><span style="color:#f1fa8c">     * @return float
</span><span style="color:#f1fa8c">     */</span>
    <span style="color:#ff79c6">protected</span> <span style="color:#ff79c6">function</span> <span style="color:#50fa7b">calcCouponAmount</span>(<span style="color:#8be9fd;font-style:italic">$avg_amount</span>, <span style="color:#8be9fd;font-style:italic">$amount</span>, <span style="color:#8be9fd;font-style:italic">$num</span>)
    {
        <span style="color:#6272a4">// If the average amount is less than or equal to the minimum amount, the minimum amount is returned directly
</span><span style="color:#6272a4"></span>        <span style="color:#ff79c6">if</span> (<span style="color:#8be9fd;font-style:italic">$avg_amount</span> <span style="color:#ff79c6">&lt;=</span> <span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">coupon_min</span>) {
            <span style="color:#ff79c6">return</span> <span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">coupon_min</span>;
        }

        <span style="color:#6272a4">// Float calculation
</span><span style="color:#6272a4"></span>        <span style="color:#8be9fd;font-style:italic">$coupon_amount</span> <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">decimal_number</span>(<span style="color:#8be9fd;font-style:italic">$avg_amount</span> <span style="color:#ff79c6">*</span> (<span style="color:#bd93f9">1</span> <span style="color:#ff79c6">+</span> <span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">apportionRandRatio</span>()));

        <span style="color:#6272a4">// If less than the minimum amount or more than the maximum amount that can be received, reacquire
</span><span style="color:#6272a4"></span>        <span style="color:#ff79c6">if</span> (<span style="color:#8be9fd;font-style:italic">$coupon_amount</span> <span style="color:#ff79c6">&lt;</span> <span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">coupon_min</span>
            <span style="color:#ff79c6">||</span> <span style="color:#8be9fd;font-style:italic">$coupon_amount</span> <span style="color:#ff79c6">&gt;</span> <span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">calcCouponAmountMax</span>(<span style="color:#8be9fd;font-style:italic">$amount</span>, <span style="color:#8be9fd;font-style:italic">$num</span>)
        ) {
            <span style="color:#ff79c6">return</span> <span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">calcCouponAmount</span>(<span style="color:#8be9fd;font-style:italic">$avg_amount</span>, <span style="color:#8be9fd;font-style:italic">$amount</span>, <span style="color:#8be9fd;font-style:italic">$num</span>);
        }

        <span style="color:#ff79c6">return</span> <span style="color:#8be9fd;font-style:italic">$coupon_amount</span>;
    }

    <span style="color:#f1fa8c">/**
</span><span style="color:#f1fa8c">     * Calculate the amount of the allocated bonus - the maximum amount that can be received
</span><span style="color:#f1fa8c">     *
</span><span style="color:#f1fa8c">     * @param float $amount
</span><span style="color:#f1fa8c">     * @param int   $num
</span><span style="color:#f1fa8c">     */</span>
    <span style="color:#ff79c6">protected</span> <span style="color:#ff79c6">function</span> <span style="color:#50fa7b">calcCouponAmountMax</span>(<span style="color:#8be9fd;font-style:italic">$amount</span>, <span style="color:#8be9fd;font-style:italic">$num</span>)
    {
        <span style="color:#ff79c6">return</span> <span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">coupon_min</span> <span style="color:#ff79c6">+</span> <span style="color:#8be9fd;font-style:italic">$amount</span> <span style="color:#ff79c6">-</span> <span style="color:#8be9fd;font-style:italic">$num</span> <span style="color:#ff79c6">*</span> <span style="color:#8be9fd;font-style:italic">$this</span><span style="color:#ff79c6">-&gt;</span><span style="color:#50fa7b">coupon_min</span>;
    }

    <span style="color:#f1fa8c">/**
</span><span style="color:#f1fa8c">     * Red packet amount floating ratio
</span><span style="color:#f1fa8c">     */</span>
    <span style="color:#ff79c6">protected</span> <span style="color:#ff79c6">function</span> <span style="color:#50fa7b">apportionRandRatio</span>()
    {
        <span style="color:#6272a4">// 60% chance of getting a substantial bonus for the remaining average (may be positive, may be negative)
</span><span style="color:#6272a4"></span>        <span style="color:#ff79c6">if</span> (rand(<span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">100</span>) <span style="color:#ff79c6">&lt;=</span> <span style="color:#bd93f9">60</span>) {
            <span style="color:#ff79c6">return</span> rand(<span style="color:#ff79c6">-</span><span style="color:#bd93f9">70</span>, <span style="color:#bd93f9">70</span>) <span style="color:#ff79c6">/</span> <span style="color:#bd93f9">100</span>; <span style="color:#6272a4">// Up and down range 70%
</span><span style="color:#6272a4"></span>        }

        <span style="color:#ff79c6">return</span> rand(<span style="color:#ff79c6">-</span><span style="color:#bd93f9">30</span>, <span style="color:#bd93f9">30</span>) <span style="color:#ff79c6">/</span> <span style="color:#bd93f9">100</span>; <span style="color:#6272a4">// In other cases, 30% up or down.
</span><span style="color:#6272a4"></span>    }

    <span style="color:#f1fa8c">/**
</span><span style="color:#f1fa8c">     * Formatted amount, retaining 2 digits
</span><span style="color:#f1fa8c">     *
</span><span style="color:#f1fa8c">     * @param float $amount
</span><span style="color:#f1fa8c">     *
</span><span style="color:#f1fa8c">     * @return float
</span><span style="color:#f1fa8c">     */</span>
    <span style="color:#ff79c6">protected</span> <span style="color:#ff79c6">function</span> <span style="color:#50fa7b">decimal_number</span>(<span style="color:#8be9fd;font-style:italic">$amount</span>)
    {
        <span style="color:#ff79c6">return</span> sprintf(<span style="color:#f1fa8c">&#39;%01.2f&#39;</span>, round(<span style="color:#8be9fd;font-style:italic">$amount</span>, <span style="color:#bd93f9">2</span>));
    }
}

<span style="color:#6272a4">// Example
</span><span style="color:#6272a4">//$coupon = new Coupon(200, 5, 30);
</span><span style="color:#6272a4">//$res = $coupon-&gt;handle();
</span><span style="color:#6272a4">//print_r($res);
</span></code></pre></td></tr></table>
</div>
</div>
      </div>


      <footer>
        


        
        
        
      </footer>
    </article>

    
  </section>

      </div>

      <footer class="footer">
  <section class="container">
    ©
    
      2019 -
    
    2022
     Ethan Kuo 
    ·
    
    Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
    
  </section>
</footer>

    </main>

    
      
      <script src="/js/coder.min.39a51230dce2ac866c049b52573e38bf60666af4bc63c1bdf203b9b2d95b1cd6.js" integrity="sha256-OaUSMNzirIZsBJtSVz44v2BmavS8Y8G98gO5stlbHNY="></script>
    

    

    

    

    

    

    

    

    
  </body>

</html>
