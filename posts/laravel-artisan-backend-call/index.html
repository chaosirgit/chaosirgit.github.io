<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Ethan Kuo"><meta name=description content="Preface If you need to execute a script programmatically in the background in your project, with the official Artisan::call() call, if the script takes too long, the process will be interrupted and the script will not execute successfully, so you need to hang the execution in the background.
Artisan Command Line Tools Please refer to the official documentation.
Called programmatically 1 2 3 4 5 <?php use Illuminate\Support\Facades\Artisan; Artisan::call('command',['id'=>1]); If there is a transaction in the code, Artisan::call() needs to be called after commit or rollback."><meta name=keywords content="Laravel,Artisan,Backend,Command"><meta name=twitter:card content="summary"><meta name=twitter:title content="Laravel Artisan Backend Call"><meta name=twitter:description content="Preface If you need to execute a script programmatically in the background in your project, with the official Artisan::call() call, if the script takes too long, the process will be interrupted and the script will not execute successfully, so you need to hang the execution in the background.
Artisan Command Line Tools Please refer to the official documentation.
Called programmatically 1 2 3 4 5 <?php use Illuminate\Support\Facades\Artisan; Artisan::call('command',['id'=>1]); If there is a transaction in the code, Artisan::call() needs to be called after commit or rollback."><meta property="og:title" content="Laravel Artisan Backend Call"><meta property="og:description" content="Preface If you need to execute a script programmatically in the background in your project, with the official Artisan::call() call, if the script takes too long, the process will be interrupted and the script will not execute successfully, so you need to hang the execution in the background.
Artisan Command Line Tools Please refer to the official documentation.
Called programmatically 1 2 3 4 5 <?php use Illuminate\Support\Facades\Artisan; Artisan::call('command',['id'=>1]); If there is a transaction in the code, Artisan::call() needs to be called after commit or rollback."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.adminchao.com/posts/laravel-artisan-backend-call/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-10-15T10:04:39+00:00"><meta property="article:modified_time" content="2018-10-15T10:04:39+00:00"><title>Laravel Artisan Backend Call Â· Ethan Kuo Blog</title><link rel=canonical href=https://blog.adminchao.com/posts/laravel-artisan-backend-call/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.d9fddbffe6f27e69985dc5fe0471cdb0e57fbf4775714bc3d847accb08f4a1f6.css integrity="sha256-2f3b/+byfmmYXcX+BHHNsOV/v0d1cUvD2Eesywj0ofY=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.002ee2378e14c7a68f1f0a53d9694ed252090987c4e768023fac694a4fc5f793.css integrity="sha256-AC7iN44Ux6aPHwpT2WlO0lIJCYfE52gCP6xpSk/F95M=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><meta name=generator content="Hugo 0.101.0"></head><body class="preload-transitions colorscheme-dark"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Ethan Kuo Blog</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/contact/>Contact me</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class=navigation-item><a href=https://blog.adminchao.com/zh-cn/>ðŸ‡¨ðŸ‡³</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://blog.adminchao.com/posts/laravel-artisan-backend-call/>Laravel Artisan Backend Call</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2018-10-15T10:04:39Z>2018-10-15 10:04:39</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
One-minute read</span></div><div class=categories><i class="fa fa-folder" aria-hidden=true></i>
<a href=/categories/technology/>Technology</a></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/laravel/>Laravel</a></span>
<span class=separator>â€¢</span>
<span class=tag><a href=/tags/artisan/>Artisan</a></span>
<span class=separator>â€¢</span>
<span class=tag><a href=/tags/backend/>Backend</a></span>
<span class=separator>â€¢</span>
<span class=tag><a href=/tags/command/>Command</a></span></div></div></header><div><h2 id=preface>Preface
<a class=heading-link href=#preface><i class="fa fa-link" aria-hidden=true></i></a></h2><p>If you need to execute a script programmatically in the background in your project, with the official <code>Artisan::call()</code> call, if the script takes too long, the process will be interrupted and the script will not execute successfully, so you need to hang the execution in the background.</p><h2 id=artisan-command-line-tools>Artisan Command Line Tools
<a class=heading-link href=#artisan-command-line-tools><i class="fa fa-link" aria-hidden=true></i></a></h2><p>Please refer to the official documentation.</p><h2 id=called-programmatically>Called programmatically
<a class=heading-link href=#called-programmatically><i class="fa fa-link" aria-hidden=true></i></a></h2><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#ff79c6>&lt;?</span>php
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Illuminate\Support\Facades\Artisan;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Artisan<span style=color:#ff79c6>::</span><span style=color:#50fa7b>call</span>(<span style=color:#f1fa8c>&#39;command&#39;</span>,[<span style=color:#f1fa8c>&#39;id&#39;</span><span style=color:#ff79c6>=&gt;</span><span style=color:#bd93f9>1</span>]);
</span></span></code></pre></td></tr></table></div></div><p>If there is a transaction in the code, <code>Artisan::call()</code> needs to be called after <code>commit</code> or <code>rollback</code>.</p><h2 id=backend-call>Backend call
<a class=heading-link href=#backend-call><i class="fa fa-link" aria-hidden=true></i></a></h2><p>Code</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#ff79c6>&lt;?</span>php
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Symfony\Component\Process\Process;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>$process</span> <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>new</span> Process(<span style=color:#f1fa8c>&#39;nohup php artisan command &#39;</span><span style=color:#ff79c6>.</span><span style=color:#8be9fd;font-style:italic>$id</span> <span style=color:#ff79c6>.</span><span style=color:#f1fa8c>&#39; &gt;/var/www/html/crowd/nohup.log 2&gt;&amp;1 &amp;&#39;</span>,<span style=color:#f1fa8c>&#39;path/to/artisan&#39;</span>); <span style=color:#6272a4>//The first parameter is the command to run, in the same way as Linux, and the second parameter is the path where the command can be executed.
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span><span style=color:#8be9fd;font-style:italic>$process</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>start</span>();
</span></span><span style=display:flex><span><span style=color:#ff79c6>?&gt;</span>
</span></span></code></pre></td></tr></table></div></div></div><footer></footer></article></section></div><footer class=footer><section class=container>Â©
2019 -
2022
Ethan Kuo
Â·
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/coder.min.9cf2dbf9b6989ef8eae941ffb4231c26d1dc026bca38f1d19fdba50177d8a9ac.js integrity="sha256-nPLb+baYnvjq6UH/tCMcJtHcAmvKOPHRn9ulAXfYqaw="></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NK08XEDHKZ"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-NK08XEDHKZ")</script></body></html>