<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="éƒ­è¶…è¶…"><meta name=description content="
  é¡¹ç›®éœ€æ±‚
  
    
  

â€ƒâ€ƒå®ç°ç™»é™†åŠŸèƒ½ï¼Œè·å– token
â€ƒâ€ƒHttpMethod: Post
â€ƒâ€ƒURI: /token
â€ƒâ€ƒRequest Header
â€ƒâ€ƒContent-Type: application/x-www-form-urlencoded"><meta name=keywords content="rest API,API,lumen,php,token,bearer token,æ•™ç¨‹,å®ä¾‹,Mysql"><meta name=twitter:card content="summary"><meta name=twitter:title content="rest API å®ä¾‹æ•™ç¨‹ä¹‹ token ç”Ÿæˆ"><meta name=twitter:description content="
  é¡¹ç›®éœ€æ±‚
  
    
  

â€ƒâ€ƒå®ç°ç™»é™†åŠŸèƒ½ï¼Œè·å– token
â€ƒâ€ƒHttpMethod: Post
â€ƒâ€ƒURI: /token
â€ƒâ€ƒRequest Header
â€ƒâ€ƒContent-Type: application/x-www-form-urlencoded"><meta property="og:title" content="rest API å®ä¾‹æ•™ç¨‹ä¹‹ token ç”Ÿæˆ"><meta property="og:description" content="
  é¡¹ç›®éœ€æ±‚
  
    
  

â€ƒâ€ƒå®ç°ç™»é™†åŠŸèƒ½ï¼Œè·å– token
â€ƒâ€ƒHttpMethod: Post
â€ƒâ€ƒURI: /token
â€ƒâ€ƒRequest Header
â€ƒâ€ƒContent-Type: application/x-www-form-urlencoded"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.ethankuo.info/zh-cn/posts/rest-api-%E5%AE%9E%E4%BE%8B%E6%95%99%E7%A8%8B%E4%B9%8B-token-%E7%94%9F%E6%88%90/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-06-21T16:42:09+00:00"><meta property="article:modified_time" content="2017-06-21T16:42:09+00:00"><meta property="og:site_name" content="éƒ­è¶…è¶…çš„åšå®¢"><title>rest API å®ä¾‹æ•™ç¨‹ä¹‹ token ç”Ÿæˆ Â· éƒ­è¶…è¶…çš„åšå®¢</title><link rel=canonical href=https://blog.ethankuo.info/zh-cn/posts/rest-api-%E5%AE%9E%E4%BE%8B%E6%95%99%E7%A8%8B%E4%B9%8B-token-%E7%94%9F%E6%88%90/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.d9fddbffe6f27e69985dc5fe0471cdb0e57fbf4775714bc3d847accb08f4a1f6.css integrity="sha256-2f3b/+byfmmYXcX+BHHNsOV/v0d1cUvD2Eesywj0ofY=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.002ee2378e14c7a68f1f0a53d9694ed252090987c4e768023fac694a4fc5f793.css integrity="sha256-AC7iN44Ux6aPHwpT2WlO0lIJCYfE52gCP6xpSk/F95M=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><meta name=generator content="Hugo 0.105.0"></head><body class="preload-transitions colorscheme-dark"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/zh-cn>éƒ­è¶…è¶…çš„åšå®¢</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/zh-cn/about/>å…³äº</a></li><li class=navigation-item><a class=navigation-link href=/zh-cn/posts/>åšæ–‡</a></li><li class=navigation-item><a class=navigation-link href=/zh-cn/contact/>è”ç³»</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class=navigation-item><a href=https://blog.ethankuo.info/>ğŸ‡ºğŸ‡¸</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://blog.ethankuo.info/zh-cn/posts/rest-api-%E5%AE%9E%E4%BE%8B%E6%95%99%E7%A8%8B%E4%B9%8B-token-%E7%94%9F%E6%88%90/>rest API å®ä¾‹æ•™ç¨‹ä¹‹ token ç”Ÿæˆ</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2017-06-21T16:42:09Z>2017-06-21 16:42:09</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
é˜…è¯»æ—¶é—´ï¼š4 åˆ†é’Ÿ</span></div><div class=categories><i class="fa fa-folder" aria-hidden=true></i>
<a href=/zh-cn/categories/lumen/>Lumen</a></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i>
<span class=tag><a href=/zh-cn/tags/rest-api/>rest API</a></span>
<span class=separator>â€¢</span>
<span class=tag><a href=/zh-cn/tags/api/>API</a></span>
<span class=separator>â€¢</span>
<span class=tag><a href=/zh-cn/tags/lumen/>lumen</a></span>
<span class=separator>â€¢</span>
<span class=tag><a href=/zh-cn/tags/php/>php</a></span>
<span class=separator>â€¢</span>
<span class=tag><a href=/zh-cn/tags/token/>token</a></span>
<span class=separator>â€¢</span>
<span class=tag><a href=/zh-cn/tags/bearer-token/>bearer token</a></span></div></div></header><div><h2 id=é¡¹ç›®éœ€æ±‚>é¡¹ç›®éœ€æ±‚
<a class=heading-link href=#%e9%a1%b9%e7%9b%ae%e9%9c%80%e6%b1%82><i class="fa fa-link" aria-hidden=true></i></a></h2><p>â€ƒâ€ƒå®ç°ç™»é™†åŠŸèƒ½ï¼Œè·å– token</p><p>â€ƒâ€ƒ<strong>HttpMethod: Post</strong><br>â€ƒâ€ƒ<strong>URI: /token</strong></p><p>â€ƒâ€ƒ<strong>Request Header</strong><br>â€ƒâ€ƒ<strong>Content-Type: application/x-www-form-urlencoded</strong></p><p>â€ƒâ€ƒ<strong>Request Body</strong><br>â€ƒâ€ƒ<strong>grant_type=password&username=13012345678&password=password123</strong></p><p>â€ƒâ€ƒ<strong>Response code:</strong></p><table><thead><tr><th>çŠ¶æ€ç </th><th>æè¿°</th></tr></thead><tbody><tr><td>200</td><td>æˆåŠŸ</td></tr><tr><td>401</td><td>æ— æƒé™</td></tr><tr><td>500</td><td>å…¶ä»–é”™è¯¯</td></tr></tbody></table><p>â€ƒâ€ƒ<strong>Response Body:(ä»… 200 æ—¶éœ€è¦è¯»)</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>&#34;access_token&#34;</span>:<span style=color:#f1fa8c>&#34;boQtj0SCGz2GFGz[...]&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>&#34;token_type&#34;</span>:<span style=color:#f1fa8c>&#34;bearer&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>&#34;expires_in&#34;</span>:<span style=color:#bd93f9>1209599</span>,
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>&#34;uid&#34;</span>:<span style=color:#bd93f9>12345</span>,
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>&#34;.issued&#34;</span>:<span style=color:#f1fa8c>&#34;Mon, 14 Oct 2013 06:53:32 GMT&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>&#34;.expires&#34;</span>:<span style=color:#f1fa8c>&#34;Mon, 28 Oct 2013 06:53:32 GMT&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h2 id=é¡¹ç›®åˆ†æ>é¡¹ç›®åˆ†æ
<a class=heading-link href=#%e9%a1%b9%e7%9b%ae%e5%88%86%e6%9e%90><i class="fa fa-link" aria-hidden=true></i></a></h2><p>â€ƒâ€ƒå‰ç«¯ä¼šæäº¤ä¸€ä¸ª <code>POST</code> è¯·æ±‚ï¼Œæäº¤åœ°å€æ˜¯ <code>/token</code> ï¼Œåœ¨ç±»å‹ä¸º<code>application/x-www-form-urlencoded</code> çš„ <code>Header</code> å‘é€ã€‚åœ¨ <code>Body</code> ä¸­å«æœ‰ç”¨æˆ·åä¸å¯†ç å‚æ•°ã€‚</p><p>â€ƒâ€ƒé‚£ä¹ˆæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯ä» <code>/token</code> çš„ <code>POST</code> è¯·æ±‚ä¸­æ”¶åˆ°è¿™ä¸¤ä¸ªå‚æ•°ï¼Œå¯¹ç”¨æˆ·è¿›è¡ŒéªŒè¯ï¼Œå¦‚æœé€šè¿‡éªŒè¯å°±ç”Ÿæˆä¸€ä¸ª <code>token</code> å°±å­˜äºæ•°æ®åº“ä¸­ï¼Œå¹¶è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œåˆ°æœŸè‡ªåŠ¨åˆ é™¤è¿™ä¸ª <code>token</code> ï¼Œå¦‚æœå·²ç»è·å–è¿‡ï¼Œä¹Ÿè¿”å› <code>401</code> çŠ¶æ€ç ï¼Œå¦‚æœå…¨éƒ¨æ­£ç¡®å¹¶æ²¡æœ‰è·å–è¿‡ï¼Œè¿”å›ä»¥ä¸Š <code>JSON</code> ã€‚</p><h2 id=é¡¹ç›®å¼€å§‹>é¡¹ç›®å¼€å§‹
<a class=heading-link href=#%e9%a1%b9%e7%9b%ae%e5%bc%80%e5%a7%8b><i class="fa fa-link" aria-hidden=true></i></a></h2><h3 id=æ¨¡å‹åŠè·¯ç”±è®¾ç½®>æ¨¡å‹åŠè·¯ç”±è®¾ç½®
<a class=heading-link href=#%e6%a8%a1%e5%9e%8b%e5%8f%8a%e8%b7%af%e7%94%b1%e8%ae%be%e7%bd%ae><i class="fa fa-link" aria-hidden=true></i></a></h3><p>â€ƒâ€ƒå‚è€ƒä¸Šä¸€éæ•™ç¨‹<a href=http://blog.ethankuo.info/%E4%BD%BF%E7%94%A8-lumen-%E5%88%9B%E5%BB%BA-rest-API-%E5%AE%9E%E4%BE%8B%E6%95%99%E7%A8%8B.html>ä½¿ç”¨ lumen åˆ›å»º rest API å®ä¾‹æ•™ç¨‹</a>,åœ¨æ­¤ä¸å†èµ˜è¿°ã€‚</p><h3 id=æ•°æ®åº“æ„å»º>æ•°æ®åº“æ„å»º
<a class=heading-link href=#%e6%95%b0%e6%8d%ae%e5%ba%93%e6%9e%84%e5%bb%ba><i class="fa fa-link" aria-hidden=true></i></a></h3><p>â€ƒâ€ƒå¯¹é¡¹ç›®è¿›è¡Œåˆ†æåï¼Œå†³å®šåˆ›å»ºä»¥ä¸‹å­—æ®µï¼š</p><table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>å±æ€§</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>id</td><td>int</td><td>ä¸»é”®</td><td>ä¾¿äºæ“ä½œ</td></tr><tr><td>uid</td><td>int</td><td>not null</td><td>user è¡¨ç”¨æˆ·çš„ id ï¼Œå³ä¸ºç”¨æˆ·çš„ uid</td></tr><tr><td>uesr_token</td><td>varchar</td><td>not null</td><td>ç”Ÿæˆçš„ token å­˜æ”¾åœ°</td></tr><tr><td>issued_time</td><td>timestamp</td><td>not null ,CURRENT_TIMESTAMP</td><td>æ’å…¥è®°å½•æ—¶é—´,ä¹Ÿå¯ç†è§£ä¸ºä¸Šæ¬¡è·å¾— token æ—¶é—´</td></tr><tr><td>expire_time</td><td>timestamp</td><td>not null</td><td>æ’å…¥è®°å½•æ—¶é—´ + 1209599 , token è¿‡æœŸæ—¶é—´</td></tr></tbody></table><p>â€ƒâ€ƒä»¥æ­¤åˆ›å»º <code>&lt;date>_create_table_token.php</code> ,å¹¶ç¼–å†™ä»¥ä¸‹ä»£ç ï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#ff79c6>&lt;?</span>php
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#ff79c6>use</span> Illuminate\Support\Facades\Schema;
</span></span><span style=display:flex><span> <span style=color:#ff79c6>use</span> Illuminate\Database\Schema\Blueprint;
</span></span><span style=display:flex><span> <span style=color:#ff79c6>use</span> Illuminate\Database\Migrations\Migration;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>CreateTableToken</span> <span style=color:#ff79c6>extends</span> Migration
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>/**
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>      * Run the migrations.
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>      *
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>      * @return void
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>      */</span>
</span></span><span style=display:flex><span>     <span style=color:#ff79c6>public</span> <span style=color:#ff79c6>function</span> <span style=color:#50fa7b>up</span>()
</span></span><span style=display:flex><span>     {
</span></span><span style=display:flex><span>         Schema<span style=color:#ff79c6>::</span><span style=color:#50fa7b>create</span>(<span style=color:#f1fa8c>&#39;token&#39;</span>, <span style=color:#ff79c6>function</span> (Blueprint <span style=color:#8be9fd;font-style:italic>$table</span>) {
</span></span><span style=display:flex><span>             <span style=color:#8be9fd;font-style:italic>$table</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>increments</span>(<span style=color:#f1fa8c>&#39;id&#39;</span>);
</span></span><span style=display:flex><span>             <span style=color:#8be9fd;font-style:italic>$table</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>integer</span>(<span style=color:#f1fa8c>&#39;uid&#39;</span>);
</span></span><span style=display:flex><span>             <span style=color:#8be9fd;font-style:italic>$table</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>string</span>(<span style=color:#f1fa8c>&#39;user_token&#39;</span>);
</span></span><span style=display:flex><span>             <span style=color:#8be9fd;font-style:italic>$table</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>timestamp</span>(<span style=color:#f1fa8c>&#39;issued_time&#39;</span>);
</span></span><span style=display:flex><span>             <span style=color:#8be9fd;font-style:italic>$table</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>timestamp</span>(<span style=color:#f1fa8c>&#39;expire_time&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>         });
</span></span><span style=display:flex><span>     }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>     <span style=color:#f1fa8c>/**
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>      * Reverse the migrations.
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>      *
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>      * @return void
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>      */</span>
</span></span><span style=display:flex><span>     <span style=color:#ff79c6>public</span> <span style=color:#ff79c6>function</span> <span style=color:#50fa7b>down</span>()
</span></span><span style=display:flex><span>     {
</span></span><span style=display:flex><span>         Schema<span style=color:#ff79c6>::</span><span style=color:#50fa7b>dropIfExists</span>(<span style=color:#f1fa8c>&#39;token&#39;</span>);
</span></span><span style=display:flex><span>     }
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span> <span style=color:#ff79c6>?&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=æ§åˆ¶å™¨ç¼–å†™>æ§åˆ¶å™¨ç¼–å†™
<a class=heading-link href=#%e6%8e%a7%e5%88%b6%e5%99%a8%e7%bc%96%e5%86%99><i class="fa fa-link" aria-hidden=true></i></a></h3><p>â€ƒâ€ƒåˆ›å»º <code>TokenController.php</code> ï¼Œä»£ç ä¸­æˆ‘éƒ½åŠ äº†å®ç°è¿‡ç¨‹çš„æ³¨é‡Šï¼Œæ³¨æ„çœ‹å“¦<br>â€ƒâ€ƒå¦‚ä¸‹ï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">49
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">50
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">51
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">52
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">53
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">54
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">55
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">56
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">57
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">58
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">59
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">60
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">61
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">62
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">63
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">64
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span> <span style=color:#ff79c6>&lt;?</span>php
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>namespace</span> App\Http\Controllers;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>use</span> App\Token;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>use</span> Illuminate\Http\Response;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>use</span> Illuminate\Http\Request;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>use</span> Illuminate\Support\Facades\DB;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>use</span> Illuminate\Support\Facades\Crypt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#ff79c6>class</span> <span style=color:#50fa7b>TokenController</span> <span style=color:#ff79c6>extends</span> Controller
</span></span><span style=display:flex><span> {
</span></span><span style=display:flex><span>     <span style=color:#ff79c6>public</span>  <span style=color:#8be9fd;font-style:italic>$username</span>;
</span></span><span style=display:flex><span>     <span style=color:#ff79c6>public</span>  <span style=color:#8be9fd;font-style:italic>$password</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>     <span style=color:#ff79c6>public</span> <span style=color:#ff79c6>function</span> __construct(Request <span style=color:#8be9fd;font-style:italic>$request</span>){
</span></span><span style=display:flex><span>       <span style=color:#8be9fd;font-style:italic>$this</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>username</span> <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>$request</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>input</span>(<span style=color:#f1fa8c>&#39;username&#39;</span>);
</span></span><span style=display:flex><span>       <span style=color:#8be9fd;font-style:italic>$this</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>password</span> <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>$request</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>input</span>(<span style=color:#f1fa8c>&#39;password&#39;</span>);
</span></span><span style=display:flex><span>     }
</span></span><span style=display:flex><span>     <span style=color:#ff79c6>public</span> <span style=color:#ff79c6>function</span> <span style=color:#50fa7b>get_token</span>(Request <span style=color:#8be9fd;font-style:italic>$request</span>)
</span></span><span style=display:flex><span>     {
</span></span><span style=display:flex><span>       <span style=color:#6272a4>//æ ¹æ®æäº¤çš„æŸ¥è¯¢
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>       <span style=color:#8be9fd;font-style:italic>$arr</span> <span style=color:#ff79c6>=</span> DB<span style=color:#ff79c6>::</span><span style=color:#50fa7b>select</span>(<span style=color:#f1fa8c>&#39;select * from user where phone=:username&#39;</span>,[<span style=color:#f1fa8c>&#39;username&#39;</span><span style=color:#ff79c6>=&gt;</span><span style=color:#8be9fd;font-style:italic>$this</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>username</span>]);
</span></span><span style=display:flex><span>       <span style=color:#6272a4>//å¦‚æœæ²¡æœ‰æ³¨å†Œ
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>       <span style=color:#ff79c6>if</span>(<span style=color:#ff79c6>!</span><span style=color:#8be9fd;font-style:italic>$arr</span>){
</span></span><span style=display:flex><span>         <span style=color:#ff79c6>return</span> response(<span style=color:#f1fa8c>&#39;&#39;</span>,<span style=color:#bd93f9>401</span>)<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>header</span>(<span style=color:#f1fa8c>&#39;Content-Type&#39;</span>,<span style=color:#f1fa8c>&#39;text/html;charset=utf-8&#39;</span>);
</span></span><span style=display:flex><span>       }
</span></span><span style=display:flex><span>       <span style=color:#6272a4>//æ³¨å†Œè¿‡ï¼Œå¯¹å¯†ç è¿›è¡Œè§£å¯†
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>       <span style=color:#8be9fd;font-style:italic>$depass</span> <span style=color:#ff79c6>=</span> Crypt<span style=color:#ff79c6>::</span><span style=color:#50fa7b>decrypt</span>(<span style=color:#8be9fd;font-style:italic>$arr</span>[<span style=color:#bd93f9>0</span>]<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>password</span>);
</span></span><span style=display:flex><span>       <span style=color:#6272a4>//å¦‚æœæäº¤çš„å¯†ç ä¸è§£å¯†åçš„å¯†ç ä¸€è‡´
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>       <span style=color:#ff79c6>if</span>(<span style=color:#8be9fd;font-style:italic>$this</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>password</span> <span style=color:#ff79c6>===</span> <span style=color:#8be9fd;font-style:italic>$depass</span>){
</span></span><span style=display:flex><span>         <span style=color:#6272a4>//æŸ¥è¯¢tokenè¡¨ï¼Œåˆ¤æ–­æ˜¯å¦è·å–è¿‡token
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>         <span style=color:#8be9fd;font-style:italic>$ishave</span> <span style=color:#ff79c6>=</span> DB<span style=color:#ff79c6>::</span><span style=color:#50fa7b>select</span>(<span style=color:#f1fa8c>&#39;select * from token where uid=:uid&#39;</span>,[<span style=color:#f1fa8c>&#39;uid&#39;</span><span style=color:#ff79c6>=&gt;</span><span style=color:#8be9fd;font-style:italic>$arr</span>[<span style=color:#bd93f9>0</span>]<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>id</span>]);
</span></span><span style=display:flex><span>         <span style=color:#6272a4>//å¦‚æœè·å–è¿‡
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>         <span style=color:#ff79c6>if</span>(<span style=color:#8be9fd;font-style:italic>$ishave</span>){
</span></span><span style=display:flex><span>           <span style=color:#ff79c6>return</span> response(<span style=color:#f1fa8c>&#39;&#39;</span>,<span style=color:#bd93f9>401</span>)<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>header</span>(<span style=color:#f1fa8c>&#39;Content-Type&#39;</span>,<span style=color:#f1fa8c>&#39;text/html;charset=utf-8&#39;</span>);
</span></span><span style=display:flex><span>         }
</span></span><span style=display:flex><span>         <span style=color:#6272a4>//å¦åˆ™
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>         <span style=color:#ff79c6>else</span>{
</span></span><span style=display:flex><span>           <span style=color:#6272a4>//ç”Ÿæˆtoken
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>           <span style=color:#8be9fd;font-style:italic>$token</span> <span style=color:#ff79c6>=</span> md5(md5(microtime(<span style=color:#ff79c6>true</span>)));
</span></span><span style=display:flex><span>           <span style=color:#6272a4>//æ’å…¥uid,å’Œtokenï¼Œå…¶ä»–ä¸¤ä¸ªå­—æ®µåœ¨åè¾¹mysqlæœ‰æ’å…¥æ–¹æ³•
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>           DB<span style=color:#ff79c6>::</span><span style=color:#50fa7b>insert</span>(<span style=color:#f1fa8c>&#39;insert into token (uid,user_token) values (:uid,:user_token)&#39;</span>,[<span style=color:#f1fa8c>&#39;uid&#39;</span><span style=color:#ff79c6>=&gt;</span><span style=color:#8be9fd;font-style:italic>$arr</span>[<span style=color:#bd93f9>0</span>]<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>id</span>,                      <span style=color:#f1fa8c>&#39;user_token&#39;</span><span style=color:#ff79c6>=&gt;</span><span style=color:#8be9fd;font-style:italic>$token</span>]);
</span></span><span style=display:flex><span>           <span style=color:#6272a4>//å‡†å¤‡è¿”å›çš„æ•°æ®
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>           <span style=color:#8be9fd;font-style:italic>$return_json</span> <span style=color:#ff79c6>=</span> DB<span style=color:#ff79c6>::</span><span style=color:#50fa7b>select</span>(<span style=color:#f1fa8c>&#39;select * from token where uid=:uid&#39;</span>,[<span style=color:#f1fa8c>&#39;uid&#39;</span><span style=color:#ff79c6>=&gt;</span><span style=color:#8be9fd;font-style:italic>$arr</span>[<span style=color:#bd93f9>0</span>]<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>id</span>]);
</span></span><span style=display:flex><span>           <span style=color:#6272a4>//æ—¶é—´å·®8å°æ—¶ï¼Œè¿˜åŸ
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>           <span style=color:#8be9fd;font-style:italic>$issued_time</span> <span style=color:#ff79c6>=</span> strtotime(<span style=color:#8be9fd;font-style:italic>$return_json</span>[<span style=color:#bd93f9>0</span>]<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>issued_time</span>)<span style=color:#ff79c6>+</span><span style=color:#bd93f9>28800</span>;
</span></span><span style=display:flex><span>           <span style=color:#8be9fd;font-style:italic>$expire_time</span> <span style=color:#ff79c6>=</span> strtotime(<span style=color:#8be9fd;font-style:italic>$return_json</span>[<span style=color:#bd93f9>0</span>]<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>expire_time</span>)<span style=color:#ff79c6>+</span><span style=color:#bd93f9>28800</span>;
</span></span><span style=display:flex><span>           <span style=color:#6272a4>//è¿”å›json
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>           <span style=color:#ff79c6>return</span> response()<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>json</span>([<span style=color:#f1fa8c>&#39;access_token&#39;</span><span style=color:#ff79c6>=&gt;</span><span style=color:#8be9fd;font-style:italic>$return_json</span>[<span style=color:#bd93f9>0</span>]<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>user_token</span>,
</span></span><span style=display:flex><span>                                    <span style=color:#f1fa8c>&#39;token_type&#39;</span><span style=color:#ff79c6>=&gt;</span><span style=color:#f1fa8c>&#39;bearer&#39;</span>,
</span></span><span style=display:flex><span>                                    <span style=color:#f1fa8c>&#39;expires_in&#39;</span><span style=color:#ff79c6>=&gt;</span><span style=color:#f1fa8c>&#39;1209599&#39;</span>,
</span></span><span style=display:flex><span>                                    <span style=color:#f1fa8c>&#39;uid&#39;</span><span style=color:#ff79c6>=&gt;</span><span style=color:#8be9fd;font-style:italic>$return_json</span>[<span style=color:#bd93f9>0</span>]<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>uid</span>,
</span></span><span style=display:flex><span>                                    <span style=color:#f1fa8c>&#39;.issued&#39;</span><span style=color:#ff79c6>=&gt;</span>gmdate(DATE_RFC822,<span style=color:#8be9fd;font-style:italic>$issued_time</span>),
</span></span><span style=display:flex><span>                                    <span style=color:#f1fa8c>&#39;.expires&#39;</span><span style=color:#ff79c6>=&gt;</span>gmdate(DATE_RFC822,<span style=color:#8be9fd;font-style:italic>$expire_time</span>)],<span style=color:#bd93f9>200</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>         }
</span></span><span style=display:flex><span>         <span style=color:#6272a4>//å¦‚æœå¯†ç ä¸ä¸€è‡´
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>       }<span style=color:#ff79c6>else</span>{
</span></span><span style=display:flex><span>         <span style=color:#ff79c6>return</span> response(<span style=color:#f1fa8c>&#39;&#39;</span>,<span style=color:#bd93f9>401</span>)<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>header</span>(<span style=color:#f1fa8c>&#39;Content-Type&#39;</span>,<span style=color:#f1fa8c>&#39;text/html;charset=utf-8&#39;</span>);
</span></span><span style=display:flex><span>       }
</span></span><span style=display:flex><span>     }
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span> <span style=color:#ff79c6>?&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=é‡åˆ°çš„é—®é¢˜>é‡åˆ°çš„é—®é¢˜
<a class=heading-link href=#%e9%81%87%e5%88%b0%e7%9a%84%e9%97%ae%e9%a2%98><i class="fa fa-link" aria-hidden=true></i></a></h4><p>â€ƒâ€ƒåœ¨æ§åˆ¶å™¨ç¼–å†™è¿‡ç¨‹ä¸­æœ‰å‡ ä¸ªé—®é¢˜è¦æ³¨æ„ï¼š</p><h5 id=æ€ä¹ˆè®¿é—®-mysql-è¯­å¥æ‰§è¡Œçš„ç»“æœ>æ€ä¹ˆè®¿é—® Mysql è¯­å¥æ‰§è¡Œçš„ç»“æœ
<a class=heading-link href=#%e6%80%8e%e4%b9%88%e8%ae%bf%e9%97%ae-mysql-%e8%af%ad%e5%8f%a5%e6%89%a7%e8%a1%8c%e7%9a%84%e7%bb%93%e6%9e%9c><i class="fa fa-link" aria-hidden=true></i></a></h5><p>â€ƒâ€ƒæ€ä¹ˆè®¿é—® <code>Mysql</code> è¯­å¥çš„æ‰§è¡Œç»“æœå‘¢ï¼Ÿå®˜æ–¹æ–‡æ¡£æ²¡æœ‰è¯¦ç»†è¯´æ˜ï¼Œåªæ˜¯ç”¨äº†ä¸€ä¸ª <code>foreach</code> æ¥éå†ã€‚è‡ªå·± <code>var_dump</code> äº†ä¸€ä¸‹ï¼Œå‘ç°æ‰§è¡Œå®Œæˆåç»“æœä¸ºæ•°ç»„ä¸‹åŒ…å«å¯¹è±¡ï¼Œç›¸å½“äºäºŒç»´æ•°ç»„ï¼Œä½†æ˜¯ç¬¬äºŒç»´æ˜¯ä¸ªå¯¹è±¡ï¼Œç”±æ­¤æ¨æ–­è®¿é—®å…·ä½“å€¼åº”è¯¥æ˜¯ <code>$array[0]->property</code> ï¼Œæœç„¶å¦‚æ­¤ã€‚</p><h5 id=ç›´æ¥ä½¿ç”¨æ•°æ®åº“ä¸­çš„åŠ å¯†å¯†ç æŸ¥è¯¢ä¸åˆ°æ•°æ®>ç›´æ¥ä½¿ç”¨æ•°æ®åº“ä¸­çš„åŠ å¯†å¯†ç æŸ¥è¯¢ä¸åˆ°æ•°æ®
<a class=heading-link href=#%e7%9b%b4%e6%8e%a5%e4%bd%bf%e7%94%a8%e6%95%b0%e6%8d%ae%e5%ba%93%e4%b8%ad%e7%9a%84%e5%8a%a0%e5%af%86%e5%af%86%e7%a0%81%e6%9f%a5%e8%af%a2%e4%b8%8d%e5%88%b0%e6%95%b0%e6%8d%ae><i class="fa fa-link" aria-hidden=true></i></a></h5><p>â€ƒâ€ƒé¡¹ç›®è¿‡ç¨‹ä¸­åˆšå¼€å§‹æˆ‘ç›´æ¥ä½¿ç”¨ç”¨æˆ·æäº¤çš„ <code>password</code> åŠ å¯†è¿‡åè¿›è¡Œæ•°æ®åº“æŸ¥è¯¢ï¼ŒåŒ¹é…ä¸åˆ°ç»“æœï¼Œåæ¥æµ‹è¯•å‘ç° <code>lumen</code> çš„åŠ å¯†å‡½æ•° <code>Crypt::encrypt()</code> å¯èƒ½å°è£…æœ‰æ—¶é—´æˆ³ï¼Œæ¯æ¬¡åŠ å¯†è¿‡åçš„å€¼éƒ½ä¸ä¸€æ ·ï¼Œæ‰€ä»¥æƒ³åˆ°å¯¹æ•°æ®çš„å¯†ç è¿›è¡Œ <code>Crypt::decrypt()</code> è§£å¯†åï¼Œä¸ç”¨æˆ·è¾“å…¥çš„å€¼è¿›è¡Œå¯¹æ¯”ã€‚</p><h5 id=æ•°æ®åº“æ—¶é—´ä¸-php-è¿”å›çš„æ—¶é—´ä¸ä¸€è‡´>æ•°æ®åº“æ—¶é—´ä¸ PHP è¿”å›çš„æ—¶é—´ä¸ä¸€è‡´
<a class=heading-link href=#%e6%95%b0%e6%8d%ae%e5%ba%93%e6%97%b6%e9%97%b4%e4%b8%8e-php-%e8%bf%94%e5%9b%9e%e7%9a%84%e6%97%b6%e9%97%b4%e4%b8%8d%e4%b8%80%e8%87%b4><i class="fa fa-link" aria-hidden=true></i></a></h5><p>â€ƒâ€ƒæµ‹è¯•è¿‡ç¨‹ä¸­å‘ç°æ•°æ®åº“æ—¶é—´æ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯è¿”å›åˆ°å‰ç«¯çš„ <code>json</code> æ—¶é—´æ¯”æ•°æ®åº“ä¸­çš„æ—¶é—´æå‰äº† 8 ä¸ªå°æ—¶ç”±æ­¤æƒ³åˆ°æ˜¯æ—¶åŒºè®¾ç½®é—®é¢˜ï¼Œç”¨ <code>php</code> è‡ªå¸¦æ—¥å‰å­—ç¬¦ä¸²è½¬ä¸ºæ—¶é—´æˆ³å‡½æ•° <code>strtotime($str)</code> æ¥è§£å†³ã€‚</p><h3 id=mysql-ç›¸å…³>Mysql ç›¸å…³
<a class=heading-link href=#mysql-%e7%9b%b8%e5%85%b3><i class="fa fa-link" aria-hidden=true></i></a></h3><h4 id=è§¦å‘å™¨çš„ç¼–å†™>è§¦å‘å™¨çš„ç¼–å†™
<a class=heading-link href=#%e8%a7%a6%e5%8f%91%e5%99%a8%e7%9a%84%e7%bc%96%e5%86%99><i class="fa fa-link" aria-hidden=true></i></a></h4><p>â€ƒâ€ƒåœ¨æ’å…¥è®°å½•æ—¶ï¼Œç”±äº <code>id</code> ã€ <code>issued_time</code> å­—æ®µæ˜¯è‡ªåŠ¨æ’å…¥çš„ï¼Œå¹¶ä¸” <code>expire_time</code> å­—æ®µä¸ <code>issued_time</code> å­—æ®µæœ‰å¿…ç„¶è”ç³»ï¼Œå³ï¼šåœ¨ <code>issued_time</code> çš„åŸºç¡€ä¸Šå¢åŠ  <code>1209599</code> ç§’ï¼Œæ‰€ä»¥æƒ³åˆ°äº†å»ºç«‹ä¸€ä¸ªè§¦å‘å™¨ï¼Œåœ¨ <code>insert</code> ä¹‹åæ›´æ–° <code>expire_time</code> å­—æ®µä¸º <code>issued_time</code> åŠ  <code>1209599</code> ç§’ï¼Œåœ¨ <code>Mysql</code> ä¸Šæµ‹è¯•ä¸æˆåŠŸï¼ŒåŸå› å¯èƒ½æ˜¯å¯¹åˆšåˆšæ’å…¥çš„è®°å½•è¿›è¡Œäº† <code>update</code> ï¼Œé€ æˆäº†å¾ªç¯è°ƒç”¨ï¼Œé‚£å°±ç”¨ <code>set</code> æ¥æ“ä½œï¼Œä½†æ˜¯ <code>set</code> å¿…é¡»åœ¨ <code>insert</code> ä¹‹å‰æ¥æ‰§è¡Œï¼Œæ¢æˆ <code>set new.expire_time = date_add(new.issued_time,interval 1209599 second)</code> åï¼Œè¿˜æ˜¯æç¤ºé”™è¯¯ï¼ŒåŸå› æ˜¯ <code>new.issued_time</code> æ²¡æœ‰ä¸èƒ½å‚ä¸è¿ç®—ï¼Œå› ä¸ºè¿˜æ²¡æœ‰æˆåŠŸæ’å…¥è¿™ä¸ªå€¼å‘¢ï¼Œé‚£å°±ä½¿ç”¨ <code>Mysql</code> çš„ <code>now()</code> å‡½æ•°ï¼Œæœ€ç»ˆä»£ç å¦‚ä¸‹ï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#ff79c6>create</span> <span style=color:#ff79c6>trigger</span> expiretime <span style=color:#ff79c6>before</span> <span style=color:#ff79c6>insert</span>
</span></span><span style=display:flex><span>          <span style=color:#ff79c6>on</span> token <span style=color:#ff79c6>for</span> <span style=color:#ff79c6>each</span> <span style=color:#ff79c6>row</span>
</span></span><span style=display:flex><span>          <span style=color:#ff79c6>set</span> <span style=color:#ff79c6>new</span>.expire_time <span style=color:#ff79c6>=</span> date_add(now(),<span style=color:#8be9fd;font-style:italic>interval</span> <span style=color:#bd93f9>1209599</span> <span style=color:#ff79c6>second</span>);
</span></span></code></pre></td></tr></table></div></div><p>â€ƒâ€ƒä»£ç è§£é‡Šå¦‚ä¸‹ï¼š</p><p><strong>åˆ›å»º è§¦å‘å™¨ <code>expiretime</code> åœ¨æ’å…¥ä¹‹å‰<br>åœ¨ <code>token</code> è¡¨ä¸Šè·Ÿè¸ªè®°å½•<br>è®¾ç½® æ–°å¢çš„ <code>expire_time</code> å€¼ä¸º ç°åœ¨çš„æ—¶é—´å¢åŠ  <code>1209599</code> ç§’ã€‚</strong></p><p>â€ƒâ€ƒ<code>date_add</code> å‡½æ•°æ˜¯å‘æ—¥æœŸæ·»åŠ æŒ‡å®šçš„æ—¶é—´é—´éš”ã€‚</p><p>â€ƒâ€ƒæµ‹è¯•åªæ’å…¥ <code>uid</code> ä¸ <code>user_token</code> å­—æ®µåï¼Œå…¶ä»–å­—æ®µæˆåŠŸè‡ªåŠ¨ç”Ÿæˆã€‚</p><h4 id=å®šæ—¶å™¨çš„ç¼–å†™>å®šæ—¶å™¨çš„ç¼–å†™
<a class=heading-link href=#%e5%ae%9a%e6%97%b6%e5%99%a8%e7%9a%84%e7%bc%96%e5%86%99><i class="fa fa-link" aria-hidden=true></i></a></h4><p>â€ƒâ€ƒç‰µæ‰¯åˆ° <code>token</code> çš„æœ‰æ•ˆæœŸï¼Œæ‰€ä»¥è¦å®šæ—¶åˆ é™¤è¿‡æœŸçš„è®°å½•ï¼Œæƒ³åˆ°ç”¨å®šæ—¶å™¨æ¥å®ç°ã€‚<br>â€ƒâ€ƒé¦–å…ˆç¼–å†™ä¸€ä¸ªæ‰§è¡Œæ–¹æ³•<br>â€ƒâ€ƒç¼–å†™ä»£ç å¦‚ä¸‹:</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#ff79c6>&gt;</span>  <span style=color:#ff79c6>delimiter</span> $
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>create</span> <span style=color:#ff79c6>procedure</span> <span style=color:#ff79c6>`</span>delete_expires<span style=color:#ff79c6>`</span>()
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>begin</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#ff79c6>delete</span> <span style=color:#ff79c6>from</span> token <span style=color:#ff79c6>where</span> expire_time <span style=color:#ff79c6>&lt;</span> now();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>end</span>; $
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>delimiter</span> ;
</span></span></code></pre></td></tr></table></div></div><p>â€ƒâ€ƒå¼€å¯ <code>Mysql</code> çš„ <code>event</code> :<br>â€ƒâ€ƒåœ¨ <code>/etc/mysql/my.cnf</code> çš„ <code>[mysqld]</code> ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>event_scheduler = 1
</span></span></code></pre></td></tr></table></div></div><p>â€ƒâ€ƒé‡å¯ <code>Mysql</code> æœåŠ¡å™¨ã€‚æŸ¥çœ‹æ˜¯å¦å¼€å¯äº† <code>event</code> ã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#ff79c6>&gt;</span> <span style=color:#ff79c6>show</span> variables <span style=color:#ff79c6>like</span> <span style=color:#f1fa8c>&#39;event_scheduler&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#ff79c6>+</span><span style=color:#6272a4>-----------------+-------+
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span><span style=color:#ff79c6>|</span> Variable_name   <span style=color:#ff79c6>|</span> Value <span style=color:#ff79c6>|</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>+</span><span style=color:#6272a4>-----------------+-------+
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span><span style=color:#ff79c6>|</span> event_scheduler <span style=color:#ff79c6>|</span> <span style=color:#ff79c6>ON</span>    <span style=color:#ff79c6>|</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>+</span><span style=color:#6272a4>-----------------+-------+
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span><span style=color:#bd93f9>1</span> <span style=color:#ff79c6>row</span> <span style=color:#ff79c6>in</span> <span style=color:#ff79c6>set</span> (<span style=color:#bd93f9>0</span>.<span style=color:#bd93f9>00</span> sec)
</span></span></code></pre></td></tr></table></div></div><p>â€ƒâ€ƒç¼–å†™ <code>event</code> è®¡åˆ’ï¼Œå¦‚ä¸‹ï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#ff79c6>&gt;</span>    <span style=color:#ff79c6>create</span> event <span style=color:#ff79c6>`</span>delexp<span style=color:#ff79c6>`</span>
</span></span><span style=display:flex><span>                 <span style=color:#ff79c6>on</span> schedule <span style=color:#ff79c6>every</span> <span style=color:#bd93f9>30</span> <span style=color:#ff79c6>second</span>
</span></span><span style=display:flex><span>                 <span style=color:#ff79c6>on</span> <span style=color:#ff79c6>completion</span> <span style=color:#ff79c6>preserve</span>
</span></span><span style=display:flex><span>                 <span style=color:#ff79c6>do</span>
</span></span><span style=display:flex><span>                 <span style=color:#ff79c6>call</span> delete_expires();
</span></span></code></pre></td></tr></table></div></div><p>â€ƒâ€ƒä»£ç è§£é‡Šï¼š</p><p>â€ƒâ€ƒ<code>on schedule</code> è°ƒåº¦æ—¶é—´ï¼šå¯ä»¥å®šä¹‰äº‹ä»¶è¢«è§¦å‘çš„å…·ä½“æ—¶é—´ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šäº‹ä»¶è¢«è§¦å‘çš„å‘¨æœŸï¼Œå¦‚æœæŒ‡å®šå‘¨æœŸæ€§ä»»åŠ¡ï¼Œè¿˜å¯ä»¥æŒ‡å®šå¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´ã€‚<br>â€ƒâ€ƒ<code>on completion</code> äº‹ä»¶å®Œæˆåçš„è¡Œä¸ºï¼šé»˜è®¤ä¸º <code>not preserve</code> ï¼Œå³äº‹ä»¶å®Œæˆä»¥ååˆ é™¤ä»»åŠ¡æœ¬èº«ï¼Œæ³¨æ„ï¼šå¯¹äºå‘¨æœŸæ€§çš„ä»»åŠ¡ï¼Œä¸è¡¨ç¤ºäº‹ä»¶åªåšä¸€æ¬¡ï¼Œè€Œæ˜¯æŒ‡åˆ°è¾¾ç»“æŸæ—¶é—´åï¼Œå†åˆ é™¤è¿™ä¸ªäº‹ä»¶ã€‚å¯ä»¥å°†å®ƒæŒ‡å®šä¸º <code>preserve</code> é‚£ä¹ˆå½“äº‹ä»¶å®Œæˆä»¥åï¼Œä¸ä¼šè¢«åˆ é™¤ã€‚<br>â€ƒâ€ƒ<code>do call</code> äº‹ä»¶ä½“ï¼Œå°±æ˜¯äº‹ä»¶å…·ä½“éœ€è¦åšä»€ä¹ˆï¼Œå®šä¹‰æ–¹å¼å’Œå­˜å‚¨è¿‡ç¨‹ç±»ä¼¼ã€‚</p><p>â€ƒâ€ƒæŸ¥çœ‹è¿è¡Œçš„ <code>event</code> è¿›ç¨‹ï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#ff79c6>&gt;</span> <span style=color:#ff79c6>show</span> processlist\<span style=color:#ff79c6>G</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=åˆ é™¤>åˆ é™¤
<a class=heading-link href=#%e5%88%a0%e9%99%a4><i class="fa fa-link" aria-hidden=true></i></a></h4><p>â€ƒâ€ƒç±»ä¼¼äºåˆ é™¤è¡¨ï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#ff79c6>&gt;</span> <span style=color:#ff79c6>drop</span> <span style=color:#ff79c6>procedure</span> delete_expires;
</span></span><span style=display:flex><span>Query OK, <span style=color:#bd93f9>0</span> <span style=color:#ff79c6>rows</span> affected (<span style=color:#bd93f9>0</span>.<span style=color:#bd93f9>00</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#ff79c6>&gt;</span> <span style=color:#ff79c6>drop</span> event delexp;
</span></span><span style=display:flex><span>Query OK, <span style=color:#bd93f9>0</span> <span style=color:#ff79c6>rows</span> affected (<span style=color:#bd93f9>0</span>.<span style=color:#bd93f9>01</span> sec)
</span></span></code></pre></td></tr></table></div></div><h2 id=æµ‹è¯•>æµ‹è¯•
<a class=heading-link href=#%e6%b5%8b%e8%af%95><i class="fa fa-link" aria-hidden=true></i></a></h2><p>â€ƒâ€ƒä½¿ç”¨ <code>Postman</code> æµ‹è¯•ï¼ŒæˆåŠŸï¼</p></div><footer></footer></article></section></div><footer class=footer><section class=container>Â©
2019 -
2022
éƒ­è¶…è¶…
Â·
æŠ€æœ¯æ”¯æŒ <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/coder.min.9cf2dbf9b6989ef8eae941ffb4231c26d1dc026bca38f1d19fdba50177d8a9ac.js integrity="sha256-nPLb+baYnvjq6UH/tCMcJtHcAmvKOPHRn9ulAXfYqaw="></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NK08XEDHKZ"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-NK08XEDHKZ")</script></body></html>