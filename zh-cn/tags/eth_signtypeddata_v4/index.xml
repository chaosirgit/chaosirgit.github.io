<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>eth_signTypedData_v4 on 郭超超的博客</title><link>https://blog.adminchao.com/zh-cn/tags/eth_signtypeddata_v4/</link><description>Recent content in eth_signTypedData_v4 on 郭超超的博客</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Wed, 09 Mar 2022 05:04:02 +0000</lastBuildDate><atom:link href="https://blog.adminchao.com/zh-cn/tags/eth_signtypeddata_v4/index.xml" rel="self" type="application/rss+xml"/><item><title>EIP-712:如何打造以太坊一键登录应用</title><link>https://blog.adminchao.com/zh-cn/posts/eip-712%E5%A6%82%E4%BD%95%E6%89%93%E9%80%A0%E4%BB%A5%E5%A4%AA%E5%9D%8A%E4%B8%80%E9%94%AE%E7%99%BB%E5%BD%95%E5%BA%94%E7%94%A8/</link><pubDate>Wed, 09 Mar 2022 05:04:02 +0000</pubDate><guid>https://blog.adminchao.com/zh-cn/posts/eip-712%E5%A6%82%E4%BD%95%E6%89%93%E9%80%A0%E4%BB%A5%E5%A4%AA%E5%9D%8A%E4%B8%80%E9%94%AE%E7%99%BB%E5%BD%95%E5%BA%94%E7%94%A8/</guid><description>前言 使用以太坊 EIP-712 协议签名授权 DAPP 登录
设计 前端使用签名之前需要授权应用连接钱包 获得授权成功后的钱包地址 然后点击签名按钮 使用钱包地址请求后端 获得随机数 功能接口 后端生成随机数，把钱包地址作为键，随机数作为值，放入缓存，过期时间 5 分钟(安全考虑) 前端把随机数写入签名消息体 调用钱包签名 获得的签名请求后端 登录 功能接口 后端对签名进行解密 验证解密后的钱包地址与提交的地址是否一致 通过注册或登录 不通过提示错误信息 后端 获得随机数 的功能接口不在此文档记录
实现步骤 连接钱包 签名之前需要先授权连接钱包。
Web3 前端篇
模板 1 2 3 4 &amp;lt;div&amp;gt; &amp;lt;h3&amp;gt;Sign Typed Data V4&amp;lt;/h3&amp;gt; &amp;lt;button type=&amp;#34;button&amp;#34; id=&amp;#34;signTypedDataV4Button&amp;#34;&amp;gt;sign typed data v4&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; Javascript 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 &amp;lt;script&amp;gt; signTypedDataV4Button.</description></item></channel></rss>